<!doctype html>
<html lang="ja" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-cardano/wrapped-smart-contracts/developers/dev_overview">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Overview | Milkomeda</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://dcspark.github.io/ja/cardano/wrapped-smart-contracts/developers/dev_overview"><meta data-rh="true" name="docusaurus_locale" content="ja"><meta data-rh="true" name="docsearch:language" content="ja"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Overview | Milkomeda"><meta data-rh="true" name="description" content="Wrapped smart contracts (WSC) are a powerful protocol that enables the execution of Layer 2 smart contracts directly from Layer 1 wallets. This integration is made possible through the provider object, which adheres to the EIP-1193 standard, acting as a bridge between the EVM provider and the Layer 1 provider. By using WSC, EVM DApps can seamlessly communicate with Layer 1 wallets and execute transactions on Layer 2 smart contracts."><meta data-rh="true" property="og:description" content="Wrapped smart contracts (WSC) are a powerful protocol that enables the execution of Layer 2 smart contracts directly from Layer 1 wallets. This integration is made possible through the provider object, which adheres to the EIP-1193 standard, acting as a bridge between the EVM provider and the Layer 1 provider. By using WSC, EVM DApps can seamlessly communicate with Layer 1 wallets and execute transactions on Layer 2 smart contracts."><link data-rh="true" rel="icon" href="/ja/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://dcspark.github.io/ja/cardano/wrapped-smart-contracts/developers/dev_overview"><link data-rh="true" rel="alternate" href="https://dcspark.github.io/cardano/wrapped-smart-contracts/developers/dev_overview" hreflang="en"><link data-rh="true" rel="alternate" href="https://dcspark.github.io/ja/cardano/wrapped-smart-contracts/developers/dev_overview" hreflang="ja"><link data-rh="true" rel="alternate" href="https://dcspark.github.io/ko/cardano/wrapped-smart-contracts/developers/dev_overview" hreflang="ko"><link data-rh="true" rel="alternate" href="https://dcspark.github.io/zh/cardano/wrapped-smart-contracts/developers/dev_overview" hreflang="zh"><link data-rh="true" rel="alternate" href="https://dcspark.github.io/cardano/wrapped-smart-contracts/developers/dev_overview" hreflang="x-default"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"><link rel="stylesheet" href="/ja/assets/css/styles.7a709eee.css">
<link rel="preload" href="/ja/assets/js/runtime~main.0166bdde.js" as="script">
<link rel="preload" href="/ja/assets/js/main.d5539b7d.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="メインコンテンツへスキップする"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">メインコンテンツへスキップする</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/ja/"><div class="navbar__logo"><img src="/ja/img/favicon.svg" alt="Milkomeda logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/ja/img/favicon.svg" alt="Milkomeda logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Milkomeda</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/ja/home/intro-c1">Cardano (EVM Sidechain)</a><a class="navbar__item navbar__link" href="/ja/">Algorand (EVM Rollup)</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>Japanese</a><ul class="dropdown__menu"><li><a href="/cardano/wrapped-smart-contracts/developers/dev_overview" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/ja/cardano/wrapped-smart-contracts/developers/dev_overview" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="ja">Japanese</a></li><li><a href="/ko/cardano/wrapped-smart-contracts/developers/dev_overview" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ko">Korean</a></li><li><a href="/zh/cardano/wrapped-smart-contracts/developers/dev_overview" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">Chinese</a></li></ul></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="最上部にスクロール" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ja/home/intro-c1">Getting Started with Milkomeda</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/ja/home/learn/sidechain-l2s">Learn Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/ja/cardano/how-it-works/">How It Works</a><button aria-label="サイドバーのカテゴリー&#x27;How It Works&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/ja/cardano/for-developers/">開発者向け</a><button aria-label="サイドバーのカテゴリー&#x27;開発者向け&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/ja/cardano/for-end-users/">エンドユーザー向け</a><button aria-label="サイドバーのカテゴリー&#x27;エンドユーザー向け&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/ja/category/guides">Guides</a><button aria-label="サイドバーのカテゴリー&#x27;Guides&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/ja/category/wrapped-smart-contracts">Wrapped Smart Contracts</a><button aria-label="サイドバーのカテゴリー&#x27;Wrapped Smart Contracts&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/cardano/wrapped-smart-contracts">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/cardano/wrapped-smart-contracts/for_users">For Users</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/ja/category/for-developers">For Developers</a><button aria-label="サイドバーのカテゴリー&#x27;For Developers&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ja/cardano/wrapped-smart-contracts/developers/dev_overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/cardano/wrapped-smart-contracts/developers/how_to_integrate">How to integrate</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/cardano/wrapped-smart-contracts/FAQs">FAQs</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/ja/category/liquid-staking">Liquid Staking</a><button aria-label="サイドバーのカテゴリー&#x27;Liquid Staking&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ja/home/get-help">サポート</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">目次</button></div><div class="theme-doc-markdown markdown"><h1>Overview</h1><p>Wrapped smart contracts (WSC) are a powerful protocol that enables the execution of Layer 2 smart contracts directly from Layer 1 wallets. This integration is made possible through the provider object, which adheres to the <a href="https://eips.ethereum.org/EIPS/eip-1193" target="_blank" rel="noopener noreferrer">EIP-1193</a> standard, acting as a bridge between the EVM provider and the Layer 1 provider. By using WSC, EVM DApps can seamlessly communicate with Layer 1 wallets and execute transactions on Layer 2 smart contracts.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="architecture">Architecture<a href="#architecture" class="hash-link" aria-label="見出しへの直接リンク" title="見出しへの直接リンク">​</a></h3><p>Wrapped Smart Contracts rely on three key components:</p><ul><li><p><strong>Smart Contracts</strong> - Similar to wallets like Flint or Metamask in Milkomeda C1, users typically have dedicated accounts. To simplify the process, a smart contract called <code>Actor</code> is utilized as an account abstraction, executing actions on behalf of the user.</p></li><li><p><strong>Oracle</strong> - The Oracle is a node.js JSON-RPC API that facilitates message relay between Layer 1 and Layer 2 actors. It provides essential methods for deploying the <code>Actor</code> (using the <code>ActorFactory</code>) and executing transactions on behalf of users.</p></li><li><p><strong>Provider</strong> - The front-end library injects the provider object based on <a href="https://eips.ethereum.org/EIPS/eip-1193" target="_blank" rel="noopener noreferrer">EIP-1193</a> into the window.ethereum object. This customized provider includes specific methods like <code>eth_sendTransaction</code> or <code>eth_requestAccounts</code>, which interact with the Layer 1 wallet and transform the result accordingly.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="protocol-flow">Protocol Flow<a href="#protocol-flow" class="hash-link" aria-label="見出しへの直接リンク" title="見出しへの直接リンク">​</a></h3><p>The full protocol flow is described below for a user interaction for the first time, where an <code>Actor</code> proxy smart contract is deployed and linked the user&#x27;s L1 address. Subsequent calls from the user will be made to that existing existing <code>Actor</code>.</p><img loading="lazy" src="/ja/assets/images/overview-f6516e5eadb320229180f95ef9a01f4c.png" class="img-full img_ev3q" alt="Connect Wallets"><ol><li><strong>User</strong> sends request to create <strong>Actor</strong> with the <code>tx_data</code>calling <strong>Final SC</strong>, and get the actor address back. <code>tx_data</code> is an encoded transaction which the <strong>Actor</strong> will call on the <strong>Final SC</strong>. (The actor address is derived from the L1 address using the <code>CREATE2</code> opcode.)</li></ol><ol start="2"><li><p><strong>External</strong> calls the <strong>ActorFactory</strong> to deploy <strong>Actor</strong> with the <code>tx_data</code> calling <strong>Final SC</strong></p></li><li><p><strong>ActorFactory</strong> deploys <strong>Actor</strong> using CREATE2 based on description of deploy function</p></li><li><p><strong>User</strong> asserts correct <strong>Actor</strong> address and sends the funds there (through the <strong>Bridge</strong>)</p></li><li><p><strong>Bridge</strong> wraps the funds and sends it to the <strong>Actor</strong></p></li><li><p><strong>External</strong> listens to the <strong>Bridge</strong> events and once the funds are wrapped it calls execute</p></li><li><p><strong>Actor</strong> calls the <strong>FinalSC</strong> on behalf of <strong>User</strong></p></li></ol><ol start="8"><li><p>After execute is complete, <strong>Actor</strong> calls the withdraw which creates a request to the <strong>Bridge</strong></p></li><li><p><strong>Bridge</strong> unwraps the funds back to the <strong>User</strong></p></li></ol><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>注意</div><div class="admonitionContent_S0QG"><p>Subsequent interactions through Wrapped Smart Contracts will skip steps 2 and 3, since the <code>Actor</code> will alread be deployed.</p></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>注意</div><div class="admonitionContent_S0QG"><p>The gas is being paid by the Actor smart contract itself, therefore to execute any transaction the actor needs to have enough balance not only to performa the trasaction but also to pay gas. To fund the <strong>Actor</strong> smart contract the <strong>User</strong> should use bridge or the DApp should prompt the wallet to send the funds to the <strong>Actor</strong> through the <strong>Bridge</strong>.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="smart-contracts">Smart contracts<a href="#smart-contracts" class="hash-link" aria-label="見出しへの直接リンク" title="見出しへの直接リンク">​</a></h3><table><thead><tr><th>Contract</th><th>Description</th></tr></thead><tbody><tr><td><a href="https://github.com/dcSpark/wrapped-smartcontracts/blob/main/packages/contracts/contracts/Actor.sol" target="_blank" rel="noopener noreferrer">Actor</a></td><td>a smart contract to be deployed on the Milkomeda Layer 2 that is bound to the specific L1 address. It serves as an account abstraction: it has a balance, a nonce, and can execute signed transactions on behalf of the user.</td></tr><tr><td><a href="https://github.com/dcSpark/wrapped-smartcontracts/blob/main/packages/contracts/contracts/ActorFactory.sol" target="_blank" rel="noopener noreferrer">ActorFactory</a></td><td>a smart contract deployed on the Milkomeda Layer 2 that is used to deploy actors. It uses CREATE2 opcode to deterministically derive Actor address from the L1 address.</td></tr><tr><td><a href="https://github.com/dcSpark/wrapped-smartcontracts/blob/main/packages/contracts/contracts/IL1MsgVerify.sol" target="_blank" rel="noopener noreferrer">L1MsgVerify</a></td><td>is a precompiled contract that is used to verify the signature of the message signed on the Layer 1 mainchain.</td></tr><tr><td>CardanoSigVerification</td><td>is a precompiled contract that is deprecated, but needed for backwards compatibility with the milkomeda-c1 testnet.</td></tr></tbody></table><p>To verify the signature the actor will use the <a href="https://github.com/dcSpark/wrapped-smartcontracts/blob/main/packages/contracts/contracts/IL1MsgVerify.sol" target="_blank" rel="noopener noreferrer">L1MsgVerify</a> precompiled contract that can verify L1 signatures. The execution will be invoked by the oracle service, which will get exact refund for the gas paid during the execution. |</p><p>The <a href="https://github.com/dcSpark/wrapped-smartcontracts/blob/main/packages/contracts/contracts/ActorFactory.sol" target="_blank" rel="noopener noreferrer">ActorFactory</a> has the deploy function the deploy the <code>Actor</code> to an address using CREATE2. The address will be hash(0xFF, sender, salt, bytecode),
where sender is factory, so salt has to be, hash(user, tx_data, random) and random can be predictable so it can be block.timestamp.</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">deploy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">string calldata mainchainAddress</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> bytes32 salt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter maybe-class-name">Actor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// Using CREATE2 to have deterministic actor address tied to the `mainchainAddress`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token maybe-class-name">Actor</span><span class="token plain"> actor </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Actor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token literal-property property">salt</span><span class="token operator">:</span><span class="token plain"> salt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">mainchainAddress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> l1Type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      emit </span><span class="token function maybe-class-name" style="color:rgb(80, 250, 123)">Deployed</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">address</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">actor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> mainchainAddress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> salt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> actor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Since the new address is the combination of <code>bytecode</code>, <code>user</code> and <code>tx_data</code>, we can be sure that the deployed <code>Actor</code> won&#x27;t be corrupted, and we can also  ssert the address on the clientside.</p><p>In the <a href="https://github.com/dcSpark/wrapped-smartcontracts/blob/main/packages/contracts/tasks/compile.ts" target="_blank" rel="noopener noreferrer">compile task</a> the <code>Actor</code> contract is compiled to yul code and prepended with the code to store the transaction gas limit to storage. The gas limit is crucial to the calculation of used gas and to verify that the oracle acted honestly and didn&#x27;t provide less gas than user signed and therefore the transaction would run out of gas. The yul code is later compiled to the evm bytecode and edited in the artifacts.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="ドキュメントのナビゲーション"><a class="pagination-nav__link pagination-nav__link--prev" href="/ja/category/for-developers"><div class="pagination-nav__sublabel">前へ</div><div class="pagination-nav__label">For Developers</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/ja/cardano/wrapped-smart-contracts/developers/how_to_integrate"><div class="pagination-nav__sublabel">次へ</div><div class="pagination-nav__label">How to integrate</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#architecture" class="table-of-contents__link toc-highlight">Architecture</a></li><li><a href="#protocol-flow" class="table-of-contents__link toc-highlight">Protocol Flow</a></li><li><a href="#smart-contracts" class="table-of-contents__link toc-highlight">Smart contracts</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Milkomeda Foundation. Built with Docusaurus.</div></div></div></footer></div>
<script src="/ja/assets/js/runtime~main.0166bdde.js"></script>
<script src="/ja/assets/js/main.d5539b7d.js"></script>
</body>
</html>