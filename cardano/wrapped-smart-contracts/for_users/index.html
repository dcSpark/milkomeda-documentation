<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-cardano/wrapped-smart-contracts/for_users">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">For Users | Milkomeda</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://dcspark.github.io/cardano/wrapped-smart-contracts/for_users"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="For Users | Milkomeda"><meta data-rh="true" name="description" content="Up until now, users who wanted to interact with Dapps on Layer 2 had to undergo a somewhat cumbersome process of moving their assets from Layer 1."><meta data-rh="true" property="og:description" content="Up until now, users who wanted to interact with Dapps on Layer 2 had to undergo a somewhat cumbersome process of moving their assets from Layer 1."><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://dcspark.github.io/cardano/wrapped-smart-contracts/for_users"><link data-rh="true" rel="alternate" href="https://dcspark.github.io/cardano/wrapped-smart-contracts/for_users" hreflang="en"><link data-rh="true" rel="alternate" href="https://dcspark.github.io/ja/cardano/wrapped-smart-contracts/for_users" hreflang="ja"><link data-rh="true" rel="alternate" href="https://dcspark.github.io/ko/cardano/wrapped-smart-contracts/for_users" hreflang="ko"><link data-rh="true" rel="alternate" href="https://dcspark.github.io/zh/cardano/wrapped-smart-contracts/for_users" hreflang="zh"><link data-rh="true" rel="alternate" href="https://dcspark.github.io/cardano/wrapped-smart-contracts/for_users" hreflang="x-default"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.7a709eee.css">
<link rel="preload" href="/assets/js/runtime~main.fb54ba25.js" as="script">
<link rel="preload" href="/assets/js/main.a82d6921.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/"><div class="navbar__logo"><img src="/img/favicon.svg" alt="Milkomeda logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/favicon.svg" alt="Milkomeda logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Milkomeda</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/home/intro-c1">Cardano (EVM Sidechain)</a><a class="navbar__item navbar__link" href="/home/intro">Algorand (EVM Rollup)</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/cardano/wrapped-smart-contracts/for_users" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/ja/cardano/wrapped-smart-contracts/for_users" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ja">Japanese</a></li><li><a href="/ko/cardano/wrapped-smart-contracts/for_users" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ko">Korean</a></li><li><a href="/zh/cardano/wrapped-smart-contracts/for_users" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">Chinese</a></li></ul></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/home/intro-c1">Getting Started with Milkomeda</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/home/learn/sidechain-l2s">Learn Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cardano/how-it-works/">How It Works</a><button aria-label="Toggle the collapsible sidebar category &#x27;How It Works&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cardano/for-developers/">For Developers</a><button aria-label="Toggle the collapsible sidebar category &#x27;For Developers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/category/guides">Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/cardano/for-end-users/">For End Users</a><button aria-label="Toggle the collapsible sidebar category &#x27;For End Users&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/category/wrapped-smart-contracts">Wrapped Smart Contracts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Wrapped Smart Contracts&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cardano/wrapped-smart-contracts">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cardano/wrapped-smart-contracts/for_users">For Users</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/category/for-developers">For Developers</a><button aria-label="Toggle the collapsible sidebar category &#x27;For Developers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cardano/wrapped-smart-contracts/FAQs">FAQs</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/category/liquid-staking">Liquid Staking</a><button aria-label="Toggle the collapsible sidebar category &#x27;Liquid Staking&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/home/get-help">Get Help</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>For Users</h1><p>Up until now, users who wanted to interact with Dapps on Layer 2 had to undergo a somewhat cumbersome process of moving their assets from Layer 1.
This migration process to a Layer 2 chain often involves bridging or wrapping assets from Layer 1 to facilitate interactions with smart contracts on Layer 2. However, this process can be complex, involving multiple steps across different interfaces and requiring more than one wallet. </p><p><strong>Milkomeda&#x27;s Wrapped Smart Contracts (WSC)</strong> present an elegant solution that not only streamlines the user experience by eliminating the need for multiple wallets but also provides a unified interaction flow between Layer 1 and Layer 2.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-wrapped-smart-contracts-work">How Wrapped Smart Contracts Work<a href="#how-wrapped-smart-contracts-work" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p><strong>Externally Owned Accounts (EOAs)</strong> and <strong>Smart Contracts</strong> are both key components of EVM blockchains, but they serve different purposes. An EOA is managed by an individual or an entity, is controlled with a private key, and is the only type of account that can initiate transactions on EVM chains. Smart contracts can run code to execute functions based on predefined conditions and enable decentralized applications (dApps), but also share some features of EOAs like the ability receive and store crypto and tokens. </p><p>The concept of account abstraction aims to enhance the user experience by blurring the distinction between EOAs and Smart Contracts, among other benefits, to improve the platform&#x27;s flexibility.</p><p><strong>Wrapped Smart Contracts (WSC)</strong> leverage the concept of account abstraction to enhance the user experience when interacting with Layer 2 while remaining within the safety of Layer 1.</p><p>When using WSC, a smart contract is deployed on Milkomeda&#x27;s Layer 2, bound to the user&#x27;s specific Layer 1 address and serves as an account abstraction, possessing a balance, a nonce, and the ability to execute signed transactions on behalf of the user.</p><p>Users can connect to DApps that support WSC using their Cardano wallets, which will generate an EVM address for them. Unlike an Externally Owned Account (EOA), this address doesn&#x27;t require users to manage private keys. Instead, users can create transactions on Layer 2 and sign them using their Layer 1 account.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="user-guide-for-evm-dapp-interaction">User Guide for EVM dApp Interaction<a href="#user-guide-for-evm-dapp-interaction" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>To demonstrate the seamless interaction between Layer 1 and Layer 2, we&#x27;ll walk through the steps of buying and selling ReserveCoin from the Djed Protocol on Milkomeda&#x27;s Layer 2 using WSC.</p><ol><li>Start EVM dApp Interaction: Begin by accessing the EVM dApp through your preferred web browser or application. Ensure that you have an active connection to the main blockchain network.</li><li>Performing Actions: Within the EVM dApp, you&#x27;ll find various actions and functionalities to explore. Engage with the dApp&#x27;s interface and choose the action you want to perform. It could be anything from purchasing an in-game item to participating in a decentralized finance (DeFi) transaction.</li><li>Transaction Request: Once you select an action, the EVM dApp will prompt you to confirm the transaction. This confirmation step ensures you&#x27;re aware of the action&#x27;s details and the associated costs (gas fees).</li><li>Proxy Deployment: Upon confirming the transaction, the EVM dApp will deploy a special smart contract called the &quot;Proxy&quot; on the sidechain. This Proxy represents your intent to carry out the chosen action.</li><li>Sidechain Execution: The Proxy smart contract interacts with the appropriate smart contract deployed on the sidechain to execute your desired action. The sidechain provides faster and more cost-efficient processing compared to the main blockchain.</li><li>Result Notification: After the execution is completed on the sidechain, the result is relayed back to the main blockchain. You will receive a notification or confirmation of the action&#x27;s success within the EVM dApp.</li><li>Updated User State: Your account&#x27;s state on the main blockchain is updated based on the results of the sidechain execution. For example, if you bought an in-game item, the item will now be reflected in your inventory.</li><li>Seamless Experience: Throughout the process, you stay on the main blockchain, making it a seamless and user-friendly experience. There&#x27;s no need to switch between different platforms or networks.</li><li>Transaction Fees: Keep in mind that every action on the blockchain incurs gas fees to cover the computational resources required for execution. These fees may vary depending on network congestion and complexity of the action. The EVM dApp will display the estimated gas fees before confirming the transaction.</li><li>Security and Reliability: The EVM dApp ensures the security and reliability of your interactions by utilizing smart contracts and consensus mechanisms built into the blockchain technology.</li></ol><p>Enjoy exploring the decentralized world of EVM dApps and leverage the efficiency of sidechain execution while staying connected to the main blockchain network!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buying-reservecoin-djed-protocol">Buying ReserveCoin (Djed Protocol)<a href="#buying-reservecoin-djed-protocol" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>The goal here will be to get the asset available on the Layer 2 (Milkomeda C1) in the Layer 1 (Cardano) wallet. </p><p>The user will connect to the Dapp using WSC, at which point a smart contract will be deployed when the connection is made for the first time, and the Layer 1 wallet will control this smart contract. After the connection is made, the user initiates the action (Buying) on the Dapps&#x27;s frontend, to be presented with and interface that will guide him through the necessary steps to buy an asset on the L2 with funds from his wallet on the L1.</p><ol><li><strong>Connecting the Wallet</strong> - Users can click &quot;Connect your wallet&quot; and choose &quot;Flint WSC&quot; to create a new address with the Wrapped Smart Contract, eliminating the need for multiple wallets.</li></ol><img loading="lazy" src="/assets/images/connect_wallets-1fedbe3f5e2bb26380e7942b77007faa.png" class="img-full img_ev3q" alt="Connect Wallets"><ol start="2"><li><strong>Initiating the Action</strong> - After the wallet is connected, the user can initiate the interaction with the DApp as he normally would. In this case, one would select the required options (&quot;Buy&quot;) and input the required amount an then press the &quot;Buy with WSC&quot; button.</li></ol><img loading="lazy" src="/assets/images/buy_reservecoin-7590783ec1757f52e590f8f0e5efeccc.png" class="img-full img_ev3q" alt="Buy Reservecoin"><ol start="3"><li><strong>Confirming the Steps</strong>  - The flow differs from using a traditional Layer 2 wallet since the WSC wallet initially has no funds on Layer 2. Users need to complete several interactions:<ol><li>Wrapping: Convert Layer 1 assets to Milkomeda assets to perform actions on Layer 2.</li><li>Execute Action: Execute the desired action on Layer 2, in this case, buying Djed ReserveCoin.</li><li>Token Allowance: Set an allowance for transferring ReserveCoin from WSC to the Layer 1 wallet.</li><li>Unwrapping: Transfer assets back to Layer 1 using the Milkomeda Bridge.</li></ol></li></ol><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Step 1</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Step 2</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Step 3</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Step 4</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><h4 class="anchor anchorWithStickyNavbar_LWe7" id="wrapping-convert-layer-1-assets-to-milkomeda-assets-to-perform-actions-on-layer-2">Wrapping: Convert Layer 1 assets to Milkomeda assets to perform actions on Layer 2<a href="#wrapping-convert-layer-1-assets-to-milkomeda-assets-to-perform-actions-on-layer-2" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>The first step is to convert the Mainchain assets into Milkomeda assets, known as wrapping, for them to be available to perform the action on the Layer 2. In this example we will be need 50.9 TADA to buy the Reservecoin and we will need to wrap an additional 4.2 TADA to cover transaction costs.</p><p>Example:</p><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>Buy ReserveCoin</td><td>50.9 TADA</td></tr><tr><td>Bridge fees</td><td>1.1 TADA</td></tr><tr><td>Bridge Lock-up</td><td>3 TADA</td></tr><tr><td>Estimated EVM fees</td><td>~0.1 TADA</td></tr><tr><td>Total</td><td>55.1 TADA</td></tr></tbody></table><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Wrapping transaction may take a few minutes (~4m).</p></div></div><p>A few minutes after signing the transaction, a confirmation will be presented and the user can move to the next step. A link to the bridge transaction for wrapping the assets is also presented.</p><img loading="lazy" src="/assets/images/djed_step1-53c8b2a2364b7cb681ab4494ede33f62.png" class="img-full img_ev3q" alt="Step 1"><p>At this point, the assets are now in the WSC on the Layer 2.</p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><h4 class="anchor anchorWithStickyNavbar_LWe7" id="execute-action-execute-the-desired-action-on-layer-2">Execute Action: Execute the desired action on Layer 2<a href="#execute-action-execute-the-desired-action-on-layer-2" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>The second step is to execute the action on the Layer 2. In this case we are buying Djed ReserveCoin, so we will be swapping TADA for Djed ReserveCoin (MOR).</p><p>After confirming the transaction, a confirmation is presented with a link to the transaction on the Layer 2 (Milkomeda C1 Sidechain).</p><img loading="lazy" src="/assets/images/djed_step2-2096cfa62d8f626aa230d1d764c89e06.png" class="img-full img_ev3q" alt="Step 2"><p>After this step, the WSC holds the ReserveCoin.</p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><h4 class="anchor anchorWithStickyNavbar_LWe7" id="token-allowance-set-an-allowance-for-transferring-reservecoin-from-wsc-to-the-layer-1-wallet">Token Allowance: Set an allowance for transferring ReserveCoin from WSC to the Layer 1 wallet<a href="#token-allowance-set-an-allowance-for-transferring-reservecoin-from-wsc-to-the-layer-1-wallet" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>Because the call to transfer the tokens (ReserveCoin) held in the WSC to the Mainchain wallet will be triggered by another contract, the user must set an allowance for this transfer in step 3.</p><p>After confirming the allowance change, a confirmation is presented with a link to the transaction on the Layer 2 (Milkomeda C1 Sidechain).</p><img loading="lazy" src="/assets/images/djed_step3-9b2669d0351f6fc123c43028b2b9e637.png" class="img-full img_ev3q" alt="Step 3"><p>After this step, the WSC still holds the ReserveCoin.</p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><h4 class="anchor anchorWithStickyNavbar_LWe7" id="unwrapping-transfer-assets-back-to-layer-1-using-the-milkomeda-bridge">Unwrapping: Transfer assets back to Layer 1 using the Milkomeda Bridge<a href="#unwrapping-transfer-assets-back-to-layer-1-using-the-milkomeda-bridge" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>The final step will transfer the asset (ReserveCoin in this example) to the Layer 1. WSC will seamlessly interact with the Milkomeda Bridge. Once bridge confirmations are complete, the assets will be securely returned to the mainchain wallet.</p><img loading="lazy" src="/assets/images/djed_step4-655605e1cb4e68162680ee54e828e8b0.png" class="img-full img_ev3q" alt="Step 7"><p>Example:
Is this example, 50 ReserveCoin will be transferred to the Layer 1 Wallet, while paying 1 TADA in bridge fees. </p><p>The Initial deposit of 3 TADA will be released</p><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>Bridge fees</td><td>1 TADA</td></tr><tr><td>You&#x27;ll transfer</td><td>50 RC</td></tr><tr><td>Deposit Release</td><td>3 TADA</td></tr></tbody></table></div></div></div><p>Each step requires confirmation and, in some cases, may involve fees or waiting for bridge confirmations.</p><p>To summarize all the steps performed for the buying process, after the connection was made, the Dapp action was triggered to wrap ADA to the L2, which was then swapped for Djed ReserveCoin. The ReserveCoin was subsequently unwrapped back to Layer 1, ending up in the Cardano address of the user.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="selling-reservecoin-djed-protocol">Selling ReserveCoin (Djed Protocol)<a href="#selling-reservecoin-djed-protocol" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>The steps to sell the ReserveCoin, instead of buying, are very similar with the following differences:</p><ul><li>In the case of buying, ADA is wrapped to the L2, swapped, and then ReserveCoin is unwrapped to the L1. However, in the case of selling, the ReserveCoin is wrapped to the L2, swapped for mADA, and then mADA is unwrapped back to ADA on the L1.</li><li>The order of the steps for the sell action is slightly different. Since the ReserveCoin is an ERC20 token, the user will have to approve spending it to enable the swap. This approval step on the buying process was done after the swap in order to be able to unwrap the ReserveCoin.</li></ul><ol><li><strong>Connecting the Wallet</strong> - Users can click &quot;Connect your wallet&quot; and choose &quot;Flint WSC&quot; to create a new address with the Wrapped Smart Contract, eliminating the need for multiple wallets.</li></ol><img loading="lazy" src="/assets/images/connect_wallets-1fedbe3f5e2bb26380e7942b77007faa.png" class="img-full img_ev3q" alt="Connect Wallets"><ol start="2"><li><strong>Initiating the Action</strong> - The user can initiate the interaction with the DApp as he normally would. In this case, one would select the required options (&quot;Sell&quot;) and input the required amount an then press the &quot;Sell with WSC&quot; button.</li></ol><img loading="lazy" src="/assets/images/sell_reservecoin-fc98505b293d19a21cfab67a2c6f9ad1.png" class="img-full img_ev3q" alt="Sell Reservecoin"><ol start="3"><li><strong>Confirming the Steps</strong>  - Users need to complete several interactions:<ol><li>Wrapping: Convert Layer 1 asset (ReserveCoin) to Milkomeda assets to perform actions on Layer 2.</li><li>Token Allowance: Set a spending allowance for swapping ReserveCoin to mADA.</li><li>Execute Action: Execute the desired action on Layer 2, in this case, selling (swapping) Djed ReserveCoin for mADA.</li><li>Unwrapping: Transfer assets (ADA) back to Layer 1 using the Milkomeda Bridge.</li></ol></li></ol><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Step 1</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Step 2</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Step 3</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Step 4</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><h4 class="anchor anchorWithStickyNavbar_LWe7" id="wrapping-convert-layer-1-assets-to-milkomeda-assets-to-perform-actions-on-layer-2-1">Wrapping: Convert Layer 1 assets to Milkomeda assets to perform actions on Layer 2<a href="#wrapping-convert-layer-1-assets-to-milkomeda-assets-to-perform-actions-on-layer-2-1" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>The first step is to convert the Mainchain assets into Milkomeda assets, known as wrapping, for them to be available to perform the action on the Layer 2. In this example we will wrap the Reservecoin and we will need to wrap an additional 4.2 TADA to cover transaction costs.</p><p>Example:</p><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>Move ReserveCoin</td><td>10,000,000 tReserveCoin</td></tr><tr><td>Bridge fees</td><td>1.1 TADA</td></tr><tr><td>Bridge Lock-up</td><td>3 TADA</td></tr><tr><td>Estimated EVM fees</td><td>~0.1 TADA</td></tr><tr><td></td><td></td></tr><tr><td>Total ReserveCoin</td><td>10,000,000 tReserveCoin</td></tr><tr><td>Total TADA</td><td>4.2</td></tr></tbody></table><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Wrapping transaction may take a few minutes (~4m).</p></div></div><img loading="lazy" src="/assets/images/sell_djed_step1-5c04eb54f1f7e39aa053d68b8a1e1aae.png" class="img-full img_ev3q" alt="Step 1"><p>A few minutes after signing the transaction, a confirmation will be presented and the user can move to the next step. A link to the bridge transaction for wrapping the assets is also presented.</p><p>At this point, the assets are now in the WSC on the Layer 2.</p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><h4 class="anchor anchorWithStickyNavbar_LWe7" id="token-allowance-set-an-allowance-for-swapping-reservecoin-for-mada">Token Allowance: Set an allowance for swapping ReserveCoin for mADA<a href="#token-allowance-set-an-allowance-for-swapping-reservecoin-for-mada" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>A normal previous step to any ERC20 swap is the token spending approval. This will allow the swapping contract to call the <code>TransferFrom</code> on the ReserveCoin token.</p><p>After confirming the allowance change, a confirmation is presented with a link to the transaction on the Layer 2 (Milkomeda C1 Sidechain).</p><img loading="lazy" src="/assets/images/sell_djed_step2-29880ffed58aa9d5889962efa9645beb.png" class="img-full img_ev3q" alt="Step 2"><p>After this step, the WSC still holds the ReserveCoin.</p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><h4 class="anchor anchorWithStickyNavbar_LWe7" id="execute-action-execute-the-desired-action-on-layer-2-1">Execute Action: Execute the desired action on Layer 2<a href="#execute-action-execute-the-desired-action-on-layer-2-1" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>The thirst step is to execute the action on the Layer 2. In this case we are selling Djed ReserveCoin, so we will be swapping Djed ReserveCoin (MOR) for mADA.</p><p>After confirming the transaction, a confirmation is presented with a link to the transaction on the Layer 2 (Milkomeda C1 Sidechain).</p><img loading="lazy" src="/assets/images/sell_djed_step3-d87adea515c16ffd79bec39c05527ad0.png" class="img-full img_ev3q" alt="Step 3"><p>After this step, the WSC holds the mADA that resulted from the swap.</p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><h4 class="anchor anchorWithStickyNavbar_LWe7" id="unwrapping-transfer-assets-back-to-layer-1-using-the-milkomeda-bridge-1">Unwrapping: Transfer assets back to Layer 1 using the Milkomeda Bridge<a href="#unwrapping-transfer-assets-back-to-layer-1-using-the-milkomeda-bridge-1" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><p>The final step will transfer the asset (mADA in this example) to the Layer 1. WSC will seamlessly interact with the Milkomeda Bridge. Once bridge confirmations are complete, the assets will be securely returned to the mainchain wallet.</p><img loading="lazy" src="/assets/images/sell_djed_step4-b56d3dfb3179b6d5c54acfe30ad52ac6.png" class="img-full img_ev3q" alt="Step 4"><p>Example:
Is this example, 9.781795 TADA will be transferred to the Layer 1 Wallet, while paying 1 TADA in bridge fees. </p><p>The Initial deposit of 3 TADA will be released</p><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>Bridge fees</td><td>1 TADA</td></tr><tr><td>You&#x27;ll transfer</td><td>9.781795 TADA</td></tr><tr><td>Deposit Release</td><td>3 TADA</td></tr></tbody></table></div></div></div><p>To summarize all the steps performed for the selling process, after the connection was made, the Dapp action was triggered to wrap ReserveCoin to the L2, which was then swapped for mADA. The mADA resulting from the swap was subsequently unwrapped back to Layer 1, ending up in the Cardano address of the user.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Wrapped Smart Contracts on Milkomeda&#x27;s Layer 2 provide a seamless user experience, enabling users to interact with DApps without the complexities of managing multiple wallets. The unified interaction flow between Layer 1 and Layer 2 enhances user convenience and encourages adoption, setting a new standard for smart contract-enabled blockchains and their ecosystems.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/cardano/wrapped-smart-contracts"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Introduction</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/category/for-developers"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">For Developers</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-wrapped-smart-contracts-work" class="table-of-contents__link toc-highlight">How Wrapped Smart Contracts Work</a></li><li><a href="#user-guide-for-evm-dapp-interaction" class="table-of-contents__link toc-highlight">User Guide for EVM dApp Interaction</a><ul><li><a href="#buying-reservecoin-djed-protocol" class="table-of-contents__link toc-highlight">Buying ReserveCoin (Djed Protocol)</a></li><li><a href="#selling-reservecoin-djed-protocol" class="table-of-contents__link toc-highlight">Selling ReserveCoin (Djed Protocol)</a></li></ul></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Milkomeda Foundation. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.fb54ba25.js"></script>
<script src="/assets/js/main.a82d6921.js"></script>
</body>
</html>