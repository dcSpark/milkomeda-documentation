<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-algorand/how-it-works/data-availability">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Data Availability (v1) | Milkomeda</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://dcspark.github.io/algorand/how-it-works/data-availability"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Data Availability (v1) | Milkomeda"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://dcspark.github.io/algorand/how-it-works/data-availability"><link data-rh="true" rel="alternate" href="https://dcspark.github.io/algorand/how-it-works/data-availability" hreflang="en"><link data-rh="true" rel="alternate" href="https://dcspark.github.io/ja/algorand/how-it-works/data-availability" hreflang="ja"><link data-rh="true" rel="alternate" href="https://dcspark.github.io/ko/algorand/how-it-works/data-availability" hreflang="ko"><link data-rh="true" rel="alternate" href="https://dcspark.github.io/zh/algorand/how-it-works/data-availability" hreflang="zh"><link data-rh="true" rel="alternate" href="https://dcspark.github.io/algorand/how-it-works/data-availability" hreflang="x-default"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.7a709eee.css">
<link rel="preload" href="/assets/js/runtime~main.8476557a.js" as="script">
<link rel="preload" href="/assets/js/main.37894445.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/"><div class="navbar__logo"><img src="/img/favicon.svg" alt="Milkomeda logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/favicon.svg" alt="Milkomeda logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Milkomeda</b></a><a class="navbar__item navbar__link" href="/home/intro-c1">Cardano (EVM Sidechain)</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/home/intro">Algorand (EVM Rollup)</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/algorand/how-it-works/data-availability" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/ja/algorand/how-it-works/data-availability" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ja">Japanese</a></li><li><a href="/ko/algorand/how-it-works/data-availability" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ko">Korean</a></li><li><a href="/zh/algorand/how-it-works/data-availability" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">Chinese</a></li></ul></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/home/intro">Getting Started with Milkomeda</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/home/learn/sidechain-l2s">Learn Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/algorand/how-it-works/">How It Works</a><button aria-label="Toggle the collapsible sidebar category &#x27;How It Works&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/algorand/how-it-works/data-availability">Data Availability (v1)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/algorand/how-it-works/rollup-research-model">Rollup Research Model</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/algorand/how-it-works/validators-election">Validators Election</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/algorand/how-it-works/sequencer-election">Sequencer Election</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/algorand/how-it-works/research-safe-exit-alternatives">Safe Exit Alternatives (Research)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/algorand/how-it-works/optimistic-rollup">Optimistic Rollup</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/algorand/for-developers/">For Developers</a><button aria-label="Toggle the collapsible sidebar category &#x27;For Developers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/category/guides-1">Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/algorand/for-end-users/">For End Users</a><button aria-label="Toggle the collapsible sidebar category &#x27;For End Users&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/home/get-help">Get Help</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Data Availability (v1)</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>In order for Milkomeda to be implemented as a rollup on Algorand, we need to solve how to use Algorand as a sequenced data availability solution. In other words, we need to figure out how to post large amounts of data on Algorand in a way that we can deterministically guarantee the order so that the history of the rollup is never unclear and thus never leads to a fork.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="background">Background<a href="#background" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>At the time of this research and the implementation of the DA solution on top of Algorand, Box Storage wasn&#x27;t available. Currently, the team is working on a solution that will allow us to store large amounts of data on Algorand using Box Storage which will be compatible with our implementation of fraud proofs.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-naive-transaction-note-approach">A Naive Transaction Note Approach<a href="#a-naive-transaction-note-approach" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Algorand has transaction notes (similar to metadata in other systems) which allow up to 1 kb of data to be included in a given transaction. Furthermore, Algorand allows up to 16 transactions to be grouped together atomically, such that all 16 txs must all be included in a block at the same time for any one of them to be considered valid.</p><p>As such, we have the ability to post rollup batches onto Algorand by compressing and partitioning the batch into 16 pieces (up to 1kb each), and posting all of said data as one group of 16 transactions. Once the transactions are accepted in a block, the batch is considered sequenced and finalized (because Algorand has instant finality).</p><p>Batches can be read and used to update the L2 state with the following steps:</p><ol><li>Read the transaction group from a block</li><li>Get the note for each transaction in the group</li><li>Rebuild the batch data from each of the 16 parts</li><li>Input the reconstructed batch data into the rollup node</li></ol><p>This approach however has a major limitation; a batch has a maximum size of 16kb. To see why this is a problem, we have randomly selected a few Optimism batches (just the input data) submitted on chain on Ethereum, and run the numbers to arrive at a rough theoretical throughput of the rollup if confined to 16kb per batch.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="optimism-batches">Optimism Batches<a href="#optimism-batches" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h4><ul><li><strong>424 Txs @ 231.4kb</strong> = 1.83 txs/kb</li><li><strong>95 Txs @ 60kb</strong> = 1.58 txs/kb</li><li><strong>331 Txs @ 171.3kb</strong> = 1.92 txs/kb</li></ul><p><strong>Average</strong>: 1.78 txs/kb<br>
<strong>Maximum Algorand Group Tx Size:</strong> 16 txs<br>
<strong>Maximum Transaction Note Field Size:</strong> 1 kb<br>
<strong>Maximum Number Of Txs Per Algorand Rollup Batch:</strong> 28.48 txs/batch<br>
<strong>Algorand Block Time:</strong> 4.5s<br>
<strong>Number Of Valid Posted Batches Per Block:</strong> 1<br>
<strong>Algorand Rollup Throughput:</strong> 6.33 txs/second  </p><p>This means that assuming we can&#x27;t squish down the batch size any more than what Optimism is already doing, and assuming only one valid batch is posted per block, the maximum throughput of the rollup going down this route on Algorand is 6.33 txs/second.</p><p>Theoretically multiple batchers can post batches in a single block, however with the first version of our rollup, the invalid batches are simply ignored. This means that if a bad actor submits the same tx to two different batchers and they both include the tx, only the first batch will be valid. Thus, unless we create a protocol on top to address this, we must assume that only a single batch per block will be posted.</p><p>The game theory of batchers coordinating to not have their batches conflict doesn’t play well since your best strategy is to include all of the high tx fee transactions yourself and pay a higher tx fee on the L1 to get your batch included. Theoretically batchers can try to coordinate off chain and ignore user txs who send the same tx to multiple batchers, but batchers can simply ignore this and then batches will have collisions (bad acting batchers can effectively cancel out any other posted batches by feeding other batchers txs that the rogue batcher is also including, thereby potentially invalidating their batches if the rogue batcher gets included first).</p><p>As such, this naive approach leaves a lot to be desired because of the 16kb limitation, and the future problems associated with having multiple batchers when the system aims to become more decentralized.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="basic-merkelized-batch-proposal-approach">Basic Merkelized Batch Proposal Approach<a href="#basic-merkelized-batch-proposal-approach" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>What the batchers aim to achieve when they post a batch on chain is a guaranteed deterministic sequencing of the batch in the rollup history and availability of said data. This is why posting a batch as a group of txs rather than separate transactions is useful, because you guarantee that the whole batch is available (because all of the batch data is posted at once). Grouping transactions however limits us to 16kb batches.
As such, we must create a protocol which allows a batcher to post their batch in numerous distinct grouped Algorand transactions, yet still guarantee sequencing and data availability.</p><p>To achieve this we will be separating the sequencing of the batches from ensuring the batch data is available (and thereby validating and finalizing the batch as well). We will dub these as the “batch proposal phase” and the “batch availability phase”. In this basic merkelized batch proposal approach, we assume there is a single batcher (or multiple trusted batchers who rotate in order) to keep things simple and focus on the underlying mechanics first.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="batch-proposal-phase">Batch Proposal Phase<a href="#batch-proposal-phase" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>In the batch proposal phase, the batcher must post some piece of data aka “propose” a batch to be added to the sequenced rollup history. To some degree, one can understand a proposed batch to be akin to an unconfirmed transaction. It is propagated out, however it is still unclear if said batch will be finalized because it may be invalid (in our context, invalid means either the txs in the batch are straight up invalid/fail, or the full batch data was never made available/posted on chain).</p><p>In practice, what the batcher does to prepare a batch is to split it up into smaller groupings of txs. These groupings of txs are then used to create a merkle tree of the entire batch. Of note, these groupings of txs need to be limited in size such that it is also possible to fit the grouping + it’s merkle proof in under 16kb.</p><p>Once the merkle tree has been created (and the batcher has verified that the groupings + their proofs are small enough to fit), then the batch can be officially proposed. The batcher does this by posting the merkle root of the batch on-chain in the note of a single transaction.</p><p>When this batch proposal transaction is included in a block, the batch has been officially proposed to be part of the rollup history.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="batch-availability-phase">Batch Availability Phase<a href="#batch-availability-phase" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>Once a batch has been proposed, we enter into the batch availability phase. In effect we have a proposal for a new batch which intends to be sequenced into the rollup history, and now we have to ensure that the data is actually available for all of the rollup nodes to be able to read the batch.</p><p>With the merkle root of the batch on-chain, the batcher now has 6 blocks to post all of the batch data. The batcher will post one or more grouped Algorand transactions, where each group of transactions has a rollup grouping + merkle proof in the transaction notes. (Easiest way to do this will be to have the 1st Algorand transaction in the group hold the merkle proof, and the rest of the 15 hold the actual rollup grouping)</p><p>During this phase if any batch proposals are submitted, they are simply ignored. If the batcher fails to post all of the batch data within the next 6 blocks, then the batch is considered invalid and ignored (this moves the rollup back to the batch proposal phase).</p><p>The rollup nodes deconstruct all of the Algorand transactions over the next 6 blocks to unpack the rollup groupings + their merkle proofs to verify and recreate the merkle tree of the batch. If the batcher posts all of the rollup groupings + merkle proofs, then the rollup nodes can verify the merkle tree is correct, and thus the batch is considered to be available to all of the rollup nodes. </p><p>Now that the batch is verified to be available, it then moves on to batch validation.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="batch-validation">Batch Validation<a href="#batch-validation" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p>The rollup node now takes the batch which has been verified to be available, and validates if the transactions in the batch are all valid (this happens 100% locally, not on Algorand).</p><p>If the batch of transactions are all valid, then they are applied to the state of the rollup. As such, the rollup progresses forward one batch.</p><p>If a single one of the transactions are invalid/fail, then the batch is ignored because it is an invalid state transition. Even though the batch was verified to be ready to be added to the sequenced rollup history and the data was made available, the actual contents of the batch were invalid, and as such it is ignored.</p><p>In either case, whether the batch is applied and the rollup progresses forward, or if the batch is ignored leaving the rollup state unchanged, we move back into the batch proposal phase where a new batch has the potential to be added to the rollup history.</p><p>Of note, all of this logic is encoded off-chain in the rollup node/auxillary software. This defined protocol is how all the rollup nodes update the state of the rollup itself locally. Anyone can spin up their own rollup node and re-read the Algorand history to deterministically arrive at the same state.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="advanced-merkelized-batch-proposal-approach">Advanced Merkelized Batch Proposal Approach<a href="#advanced-merkelized-batch-proposal-approach" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The basic merkelized batch proposal approach allows us to get past the 16kb limit, however only works in a context where there is a single batcher (or fully trusted set of batchers going in order). In this advanced variant, we will be upgrading the batch proposal phase with some more complex dynamics to allow for an open set of batchers to exist who may be adversarial and try to cause problems.</p><p>In this advanced approach, we will be providing all whitelisted batchers (which will likely be a subset of the bridge validators, who eventually will be required to stake assets) the opportunity to be selected as the batch submitter to extend the rollup history.</p><p>After the previous batch has either been finalized or ignored (if invalid), we return back to the batch proposal phase. Any of the batchers can now propose a new batch by posting the merkle root of it on-chain. Once a batch proposal is posted by one batcher, all other batchers have 2 blocks to submit their own batch proposals.</p><p>After the 2 blocks have passed, one of the batch proposals is pseudo-randomly selected via using the hash of the previous latest batch as a seed to deterministically choose one. The submitter of the batch proposal now is required to post the data of the batch as the protocol moves into the batch availability phase.</p><p>The batch availability phase proceeds just as expected, wherein the selected batch submitter must post all of the groupings + merkle proofs of their batch in the next 6 blocks. If they fail to do this (or if during batch validation the batch is invalid), the batch is ignored and the protocol returns to the batch proposal phase.</p><p>Depending on the complexity of the implementation, if specific batchers repeatedly keep failing to submit the data of batches they submit, it would be wise to stake slash them for attempting to DoS the system or for simply failing to ensure their software is working properly.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="basic-and-advanced-merkelized-batch-proposal-throughput">Basic and Advanced Merkelized Batch Proposal Throughput<a href="#basic-and-advanced-merkelized-batch-proposal-throughput" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>In this section, we will take a look at some rough estimates of the potential TPS of both the basic and advanced merkelized batch proposal approaches assuming we fill 100% of space of all of the blocks during the batch availability phase. Do note, according to (this post)<!-- -->[https://www.algorand.com/resources/algorand-announcements/algorand-2021-performance]<!-- --> by Silvio Micali, the block size will increase 5x and the block time will decrease from 4.5s -&gt; 2.5s. We will take a look at the potential TPS for both current and future circumstances.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="current-algorand-throughput-as-of-august-2022">Current Algorand Throughput (as of August 2022)<a href="#current-algorand-throughput-as-of-august-2022" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p><strong>Average # Of Rollup Txs Per KB:</strong> 1.78 txs/kb<br>
<strong>Algorand Block Time:</strong> 4.5s<br>
<strong>Algorand Block Size:</strong> 1mb  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-merkelized-batch-proposal-approach-1">Basic Merkelized Batch Proposal Approach<a href="#basic-merkelized-batch-proposal-approach-1" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p><strong>Batch Proposal Phase Length:</strong> 1 Block<br>
<strong>Batch Availability Phase Length:</strong> 6 Blocks<br>
<strong>Total Duration Of Batch Posting:</strong> 7 Blocks  </p><p><strong>#<!-- --> Of Txs Possible In Single Batch:</strong> 10,680 txs<br>
<strong>Algorand Rollup Throughput:</strong> 338 txs/second  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="advanced-merkelized-batch-proposal-approach-1">Advanced Merkelized Batch Proposal Approach<a href="#advanced-merkelized-batch-proposal-approach-1" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p><strong>Batch Proposal Phase Length:</strong> 3 Block<br>
<strong>Batch Availability Phase Length:</strong> 6 Blocks<br>
<strong>Total Duration Of Batch Posting:</strong> 9 Blocks  </p><p><strong>#<!-- --> Of Txs Possible In Single Batch:</strong> 10,680 txs<br>
<strong>Algorand Rollup Throughput:</strong> 263 txs/second  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="updated-algorand-throughput">Updated Algorand Throughput<a href="#updated-algorand-throughput" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p><strong>Average # Of Rollup Txs Per KB:</strong> 1.78 txs/kb<br>
<strong>Algorand Block Time:</strong> 2.5s<br>
<strong>Algorand Block Size:</strong> 5mb  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-merkelized-batch-proposal-approach-2">Basic Merkelized Batch Proposal Approach<a href="#basic-merkelized-batch-proposal-approach-2" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p><strong>Batch Proposal Phase Length:</strong> 1 Block<br>
<strong>Batch Availability Phase Length:</strong> 6 Blocks<br>
<strong>Total Duration Of Batch Posting:</strong> 7 Blocks  </p><p><strong>#<!-- --> Of Txs Possible In Single Batch:</strong> 53,400 txs<br>
<strong>Algorand Rollup Throughput:</strong> 3,073 txs/second  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="advanced-merkelized-batch-proposal-approach-2">Advanced Merkelized Batch Proposal Approach<a href="#advanced-merkelized-batch-proposal-approach-2" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h3><p><strong>Batch Proposal Phase Length:</strong> 3 Block<br>
<strong>Batch Availability Phase Length:</strong> 6 Blocks<br>
<strong>Total Duration Of Batch Posting:</strong> 9 Blocks  </p><p><strong>#<!-- --> Of Txs Possible In Single Batch:</strong> 53,400 txs<br>
<strong>Algorand Rollup Throughput:</strong> 2,373 txs/second  </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="data-availability-v1-conclusion">Data Availability (v1) Conclusion<a href="#data-availability-v1-conclusion" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The naive transaction note approach is extremely limited due to the 16kb limit. A max TPS of 6.33 is insufficient for our needs, and thus was never actually implemented.</p><p>Using the merkelized batch proposal approach, the max TPS is between 263 to 3073 txs/second (depending on which variant, and before or after Algorand improves their base throughput). This represents a 41.5x to 485.5x improvement over the naive approach.</p><p>Milkomeda started with the basic merkelized batch proposal approach, and will move towards the advanced approach over time. The basic approach provides it with the majority of the benefits, however is simpler and as such is more centralized as a tradeoff.</p><p>Nonetheless, existing rollup approaches are all primarily limited to a single batcher/roller/sequencer on Ethereum, so this is a tradeoff that is not uncommon. Furthermore we have a clear path to expanding the protocol to support further batchers (you can find our research in the next sections), allowing us to keep building towards a more decentralized future.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/algorand/how-it-works/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">How It Works</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/algorand/how-it-works/rollup-research-model"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Rollup Research Model</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a><ul><li><a href="#background" class="table-of-contents__link toc-highlight">Background</a></li></ul></li><li><a href="#a-naive-transaction-note-approach" class="table-of-contents__link toc-highlight">A Naive Transaction Note Approach</a></li><li><a href="#basic-merkelized-batch-proposal-approach" class="table-of-contents__link toc-highlight">Basic Merkelized Batch Proposal Approach</a><ul><li><a href="#batch-proposal-phase" class="table-of-contents__link toc-highlight">Batch Proposal Phase</a></li><li><a href="#batch-availability-phase" class="table-of-contents__link toc-highlight">Batch Availability Phase</a></li><li><a href="#batch-validation" class="table-of-contents__link toc-highlight">Batch Validation</a></li></ul></li><li><a href="#advanced-merkelized-batch-proposal-approach" class="table-of-contents__link toc-highlight">Advanced Merkelized Batch Proposal Approach</a></li><li><a href="#basic-and-advanced-merkelized-batch-proposal-throughput" class="table-of-contents__link toc-highlight">Basic and Advanced Merkelized Batch Proposal Throughput</a><ul><li><a href="#current-algorand-throughput-as-of-august-2022" class="table-of-contents__link toc-highlight">Current Algorand Throughput (as of August 2022)</a></li><li><a href="#basic-merkelized-batch-proposal-approach-1" class="table-of-contents__link toc-highlight">Basic Merkelized Batch Proposal Approach</a></li><li><a href="#advanced-merkelized-batch-proposal-approach-1" class="table-of-contents__link toc-highlight">Advanced Merkelized Batch Proposal Approach</a></li><li><a href="#updated-algorand-throughput" class="table-of-contents__link toc-highlight">Updated Algorand Throughput</a></li><li><a href="#basic-merkelized-batch-proposal-approach-2" class="table-of-contents__link toc-highlight">Basic Merkelized Batch Proposal Approach</a></li><li><a href="#advanced-merkelized-batch-proposal-approach-2" class="table-of-contents__link toc-highlight">Advanced Merkelized Batch Proposal Approach</a></li></ul></li><li><a href="#data-availability-v1-conclusion" class="table-of-contents__link toc-highlight">Data Availability (v1) Conclusion</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Milkomeda Foundation. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.8476557a.js"></script>
<script src="/assets/js/main.37894445.js"></script>
</body>
</html>