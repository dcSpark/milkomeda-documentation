"use strict";(self.webpackChunkmilkomeda_documentation=self.webpackChunkmilkomeda_documentation||[]).push([[9952],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>m});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),c=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(a),m=r,h=u["".concat(s,".").concat(m)]||u[m]||d[m]||o;return a?n.createElement(h,i(i({ref:t},p),{},{components:a})):n.createElement(h,i({ref:t},p))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var c=2;c<o;c++)i[c]=a[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},5162:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(7294),r=a(6010);const o="tabItem_Ymn6";function i(e){let{children:t,hidden:a,className:i}=e;return n.createElement("div",{role:"tabpanel",className:(0,r.Z)(o,i),hidden:a},t)}},4866:(e,t,a)=>{a.d(t,{Z:()=>N});var n=a(7462),r=a(7294),o=a(6010),i=a(2466),l=a(6775),s=a(1980),c=a(7392),p=a(12);function d(e){return function(e){var t;return(null==(t=r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})))?void 0:t.filter(Boolean))??[]}(e).map((e=>{let{props:{value:t,label:a,attributes:n,default:r}}=e;return{value:t,label:a,attributes:n,default:r}}))}function u(e){const{values:t,children:a}=e;return(0,r.useMemo)((()=>{const e=t??d(a);return function(e){const t=(0,c.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,a])}function m(e){let{value:t,tabValues:a}=e;return a.some((e=>e.value===t))}function h(e){let{queryString:t=!1,groupId:a}=e;const n=(0,l.k6)(),o=function(e){let{queryString:t=!1,groupId:a}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:t,groupId:a});return[(0,s._X)(o),(0,r.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(n.location.search);t.set(o,e),n.replace({...n.location,search:t.toString()})}),[o,n])]}function f(e){const{defaultValue:t,queryString:a=!1,groupId:n}=e,o=u(e),[i,l]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const n=a.find((e=>e.default))??a[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:o}))),[s,c]=h({queryString:a,groupId:n}),[d,f]=function(e){let{groupId:t}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(t),[n,o]=(0,p.Nk)(a);return[n,(0,r.useCallback)((e=>{a&&o.set(e)}),[a,o])]}({groupId:n}),g=(()=>{const e=s??d;return m({value:e,tabValues:o})?e:null})();(0,r.useLayoutEffect)((()=>{g&&l(g)}),[g]);return{selectedValue:i,selectValue:(0,r.useCallback)((e=>{if(!m({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);l(e),c(e),f(e)}),[c,f,o]),tabValues:o}}var g=a(2389);const k="tabList__CuJ",y="tabItem_LNqP";function w(e){let{className:t,block:a,selectedValue:l,selectValue:s,tabValues:c}=e;const p=[],{blockElementScrollPositionUntilNextRender:d}=(0,i.o5)(),u=e=>{const t=e.currentTarget,a=p.indexOf(t),n=c[a].value;n!==l&&(d(t),s(n))},m=e=>{var t;let a=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const t=p.indexOf(e.currentTarget)+1;a=p[t]??p[0];break}case"ArrowLeft":{const t=p.indexOf(e.currentTarget)-1;a=p[t]??p[p.length-1];break}}null==(t=a)||t.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":a},t)},c.map((e=>{let{value:t,label:a,attributes:i}=e;return r.createElement("li",(0,n.Z)({role:"tab",tabIndex:l===t?0:-1,"aria-selected":l===t,key:t,ref:e=>p.push(e),onKeyDown:m,onClick:u},i,{className:(0,o.Z)("tabs__item",y,null==i?void 0:i.className,{"tabs__item--active":l===t})}),a??t)})))}function b(e){let{lazy:t,children:a,selectedValue:n}=e;const o=(Array.isArray(a)?a:[a]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===n));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},o.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==n}))))}function v(e){const t=f(e);return r.createElement("div",{className:(0,o.Z)("tabs-container",k)},r.createElement(w,(0,n.Z)({},e,t)),r.createElement(b,(0,n.Z)({},e,t)))}function N(e){const t=(0,g.Z)();return r.createElement(v,(0,n.Z)({key:String(t)},e))}},7969:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>N,contentTitle:()=>b,default:()=>C,frontMatter:()=>w,metadata:()=>v,toc:()=>A});var n=a(7462),r=(a(7294),a(3905));const o=a.p+"assets/images/connect_wallets-1fedbe3f5e2bb26380e7942b77007faa.png",i=a.p+"assets/images/wallet-6883f1a00183712814a285c0bb61b0c2.png",l=a.p+"assets/images/buy_reservecoin-7590783ec1757f52e590f8f0e5efeccc.png";var s=a(4866),c=a(5162),p=a(6544);const d=a.p+"assets/images/djed_step2-2096cfa62d8f626aa230d1d764c89e06.png",u=a.p+"assets/images/djed_step3-9b2669d0351f6fc123c43028b2b9e637.png",m=a.p+"assets/images/djed_step4-655605e1cb4e68162680ee54e828e8b0.png",h=a.p+"assets/images/sell_reservecoin-fc98505b293d19a21cfab67a2c6f9ad1.png",f=a.p+"assets/images/sell_djed_step1-5c04eb54f1f7e39aa053d68b8a1e1aae.png",g=a.p+"assets/images/sell_djed_step2-29880ffed58aa9d5889962efa9645beb.png",k=a.p+"assets/images/sell_djed_step3-d87adea515c16ffd79bec39c05527ad0.png",y=a.p+"assets/images/sell_djed_step4-b56d3dfb3179b6d5c54acfe30ad52ac6.png",w={sidebar_position:2},b="For Users",v={unversionedId:"cardano/wrapped-smart-contracts/for_users",id:"cardano/wrapped-smart-contracts/for_users",title:"For Users",description:"Up until now, users who wanted to interact with Dapps on Layer 2 had to undergo a somewhat cumbersome process of moving their assets from Layer 1.",source:"@site/docs/cardano/wrapped-smart-contracts/for_users.md",sourceDirName:"cardano/wrapped-smart-contracts",slug:"/cardano/wrapped-smart-contracts/for_users",permalink:"/cardano/wrapped-smart-contracts/for_users",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"cardano",previous:{title:"Overview",permalink:"/cardano/wrapped-smart-contracts"},next:{title:"For Developers",permalink:"/category/for-developers"}},N={},A=[{value:"How Wrapped Smart Contracts Work",id:"how-wrapped-smart-contracts-work",level:2},{value:"User Guide for EVM dApp Interaction",id:"user-guide-for-evm-dapp-interaction",level:2},{value:"Buying ReserveCoin (Djed Protocol)",id:"buying-reservecoin-djed-protocol",level:3},{value:"Wrapping: Convert Layer 1 assets to Milkomeda assets to perform actions on Layer 2",id:"wrapping-convert-layer-1-assets-to-milkomeda-assets-to-perform-actions-on-layer-2",level:4},{value:"Execute Action: Execute the desired action on Layer 2",id:"execute-action-execute-the-desired-action-on-layer-2",level:4},{value:"Token Allowance: Set an allowance for transferring ReserveCoin from WSC to the Layer 1 wallet",id:"token-allowance-set-an-allowance-for-transferring-reservecoin-from-wsc-to-the-layer-1-wallet",level:4},{value:"Unwrapping: Transfer assets back to Layer 1 using the Milkomeda Bridge",id:"unwrapping-transfer-assets-back-to-layer-1-using-the-milkomeda-bridge",level:4},{value:"Selling ReserveCoin (Djed Protocol)",id:"selling-reservecoin-djed-protocol",level:3},{value:"Wrapping: Convert Layer 1 assets to Milkomeda assets to perform actions on Layer 2",id:"wrapping-convert-layer-1-assets-to-milkomeda-assets-to-perform-actions-on-layer-2-1",level:4},{value:"Token Allowance: Set an allowance for swapping ReserveCoin for mADA",id:"token-allowance-set-an-allowance-for-swapping-reservecoin-for-mada",level:4},{value:"Execute Action: Execute the desired action on Layer 2",id:"execute-action-execute-the-desired-action-on-layer-2-1",level:4},{value:"Unwrapping: Transfer assets back to Layer 1 using the Milkomeda Bridge",id:"unwrapping-transfer-assets-back-to-layer-1-using-the-milkomeda-bridge-1",level:4},{value:"Summary",id:"summary",level:2}],T={toc:A};function C(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},T,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"for-users"},"For Users"),(0,r.kt)("p",null,"Up until now, users who wanted to interact with Dapps on Layer 2 had to undergo a somewhat cumbersome process of moving their assets from Layer 1.\nThis migration process to a Layer 2 chain often involves bridging or wrapping assets from Layer 1 to facilitate interactions with smart contracts on Layer 2. However, this process can be complex, involving multiple steps across different interfaces and requiring more than one wallet. "),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Milkomeda's Wrapped Smart Contracts (WSC)")," present an elegant solution that not only streamlines the user experience by eliminating the need for multiple wallets but also provides a unified interaction flow between Layer 1 and Layer 2."),(0,r.kt)("h2",{id:"how-wrapped-smart-contracts-work"},"How Wrapped Smart Contracts Work"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Externally Owned Accounts (EOAs)")," and ",(0,r.kt)("strong",{parentName:"p"},"Smart Contracts")," are both key components of EVM blockchains, but they serve different purposes. An EOA is managed by an individual or an entity, is controlled with a private key, and is the only type of account that can initiate transactions on EVM chains. Smart contracts can run code to execute functions based on predefined conditions and enable decentralized applications (dApps), but also share some features of EOAs like the ability receive and store crypto and tokens. "),(0,r.kt)("p",null,"The concept of account abstraction aims to enhance the user experience by blurring the distinction between EOAs and Smart Contracts, among other benefits, to improve the platform's flexibility."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Wrapped Smart Contracts (WSC)")," leverage the concept of account abstraction to enhance the user experience when interacting with Layer 2 while remaining within the safety of Layer 1."),(0,r.kt)("p",null,"When using WSC, a smart contract is deployed on Milkomeda's Layer 2, bound to the user's specific Layer 1 address and serves as an account abstraction, possessing a balance, a nonce, and the ability to execute signed transactions on behalf of the user."),(0,r.kt)("p",null,"Users can connect to DApps that support WSC using their Cardano wallets, which will generate an EVM address for them. Unlike an Externally Owned Account (EOA), this address doesn't require users to manage private keys. Instead, users can create transactions on Layer 2 and sign them using their Layer 1 account."),(0,r.kt)("h2",{id:"user-guide-for-evm-dapp-interaction"},"User Guide for EVM dApp Interaction"),(0,r.kt)("p",null,"To demonstrate the seamless interaction between Layer 1 and Layer 2, we'll walk through the steps of buying and selling ReserveCoin from the Djed Protocol on Milkomeda's Layer 2 using WSC."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Start EVM dApp Interaction: Begin by accessing the EVM dApp through your preferred web browser or application. Ensure that you have an active connection to the main blockchain network."),(0,r.kt)("li",{parentName:"ol"},"Performing Actions: Within the EVM dApp, you'll find various actions and functionalities to explore. Engage with the dApp's interface and choose the action you want to perform. It could be anything from purchasing an in-game item to participating in a decentralized finance (DeFi) transaction."),(0,r.kt)("li",{parentName:"ol"},"Transaction Request: Once you select an action, the EVM dApp will prompt you to confirm the transaction. This confirmation step ensures you're aware of the action's details and the associated costs (gas fees)."),(0,r.kt)("li",{parentName:"ol"},'Proxy Deployment: Upon confirming the transaction, the EVM dApp will deploy a special smart contract called the "Proxy" on the sidechain. This Proxy represents your intent to carry out the chosen action.'),(0,r.kt)("li",{parentName:"ol"},"Sidechain Execution: The Proxy smart contract interacts with the appropriate smart contract deployed on the sidechain to execute your desired action. The sidechain provides faster and more cost-efficient processing compared to the main blockchain."),(0,r.kt)("li",{parentName:"ol"},"Result Notification: After the execution is completed on the sidechain, the result is relayed back to the main blockchain. You will receive a notification or confirmation of the action's success within the EVM dApp."),(0,r.kt)("li",{parentName:"ol"},"Updated User State: Your account's state on the main blockchain is updated based on the results of the sidechain execution. For example, if you bought an in-game item, the item will now be reflected in your inventory."),(0,r.kt)("li",{parentName:"ol"},"Seamless Experience: Throughout the process, you stay on the main blockchain, making it a seamless and user-friendly experience. There's no need to switch between different platforms or networks."),(0,r.kt)("li",{parentName:"ol"},"Transaction Fees: Keep in mind that every action on the blockchain incurs gas fees to cover the computational resources required for execution. These fees may vary depending on network congestion and complexity of the action. The EVM dApp will display the estimated gas fees before confirming the transaction."),(0,r.kt)("li",{parentName:"ol"},"Security and Reliability: The EVM dApp ensures the security and reliability of your interactions by utilizing smart contracts and consensus mechanisms built into the blockchain technology.")),(0,r.kt)("p",null,"Enjoy exploring the decentralized world of EVM dApps and leverage the efficiency of sidechain execution while staying connected to the main blockchain network!"),(0,r.kt)("h3",{id:"buying-reservecoin-djed-protocol"},"Buying ReserveCoin (Djed Protocol)"),(0,r.kt)("p",null,"The goal here will be to get the asset available on the Layer 2 (Milkomeda C1) in the Layer 1 (Cardano) wallet. "),(0,r.kt)("p",null,"The user will connect to the Dapp using WSC, at which point a smart contract will be deployed when the connection is made for the first time, and the Layer 1 wallet will control this smart contract. After the connection is made, the user initiates the action (Buying) on the Dapps's frontend, to be presented with and interface that will guide him through the necessary steps to buy an asset on the L2 with funds from his wallet on the L1."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Connecting the Wallet"),' - Users can click "Connect your wallet" and choose "Flint WSC" to create a new address with the Wrapped Smart Contract, eliminating the need for multiple wallets.')),(0,r.kt)("img",{src:o,className:"img-full",alt:"Connect Wallets"}),(0,r.kt)("p",null,"By clicking on the wallet address in the top right corner, users can access the WSC interface, which displays information and buttons to interact with the contract. Users can see their Layer 1 wallet balance and trigger actions with their WSC Wallet."),(0,r.kt)("img",{src:i,className:"img-full",alt:"Wallet"}),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Initiating the Action"),' - After the wallet is connected, the user can initiate the interaction with the DApp as he normally would. In this case, one would select the required options ("Buy") and input the required amount an then press the "Buy with WSC" button.')),(0,r.kt)("img",{src:l,className:"img-full",alt:"Buy Reservecoin"}),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Confirming the Steps"),"  - The flow differs from using a traditional Layer 2 wallet since the WSC wallet initially has no funds on Layer 2. Users need to complete several interactions:",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"Wrapping: Convert Layer 1 assets to Milkomeda assets to perform actions on Layer 2."),(0,r.kt)("li",{parentName:"ol"},"Execute Action: Execute the desired action on Layer 2, in this case, buying Djed ReserveCoin."),(0,r.kt)("li",{parentName:"ol"},"Token Allowance: Set an allowance for transferring ReserveCoin from WSC to the Layer 1 wallet."),(0,r.kt)("li",{parentName:"ol"},"Unwrapping: Transfer assets back to Layer 1 using the Milkomeda Bridge.")))),(0,r.kt)(s.Z,{mdxType:"Tabs"},(0,r.kt)(c.Z,{value:"buy_step1",label:"Step 1",default:!0,mdxType:"TabItem"},(0,r.kt)("h4",{id:"wrapping-convert-layer-1-assets-to-milkomeda-assets-to-perform-actions-on-layer-2"},"Wrapping: Convert Layer 1 assets to Milkomeda assets to perform actions on Layer 2"),(0,r.kt)("p",null,"The first step is to convert the Mainchain assets into Milkomeda assets, known as wrapping, for them to be available to perform the action on the Layer 2. In this example we will be need 50.9 TADA to buy the Reservecoin and we will need to wrap an additional 4.2 TADA to cover transaction costs."),(0,r.kt)("p",null,"Example:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Buy ReserveCoin"),(0,r.kt)("td",{parentName:"tr",align:null},"50.9 TADA")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Bridge fees"),(0,r.kt)("td",{parentName:"tr",align:null},"1.1 TADA")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Bridge Lock-up"),(0,r.kt)("td",{parentName:"tr",align:null},"3 TADA")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Estimated EVM fees"),(0,r.kt)("td",{parentName:"tr",align:null},"~0.1 TADA")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Total"),(0,r.kt)("td",{parentName:"tr",align:null},"55.1 TADA")))),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Wrapping transaction may take a few minutes (~4m).")),(0,r.kt)("p",null,"A few minutes after signing the transaction, a confirmation will be presented and the user can move to the next step. A link to the bridge transaction for wrapping the assets is also presented."),(0,r.kt)("img",{src:p.Z,className:"img-full",alt:"Step 1"}),(0,r.kt)("p",null,"At this point, the assets are now in the WSC on the Layer 2.")),(0,r.kt)(c.Z,{value:"buy_step2",label:"Step 2",mdxType:"TabItem"},(0,r.kt)("h4",{id:"execute-action-execute-the-desired-action-on-layer-2"},"Execute Action: Execute the desired action on Layer 2"),(0,r.kt)("p",null,"The second step is to execute the action on the Layer 2. In this case we are buying Djed ReserveCoin, so we will be swapping TADA for Djed ReserveCoin (MOR)."),(0,r.kt)("p",null,"After confirming the transaction, a confirmation is presented with a link to the transaction on the Layer 2 (Milkomeda C1 Sidechain)."),(0,r.kt)("img",{src:d,className:"img-full",alt:"Step 2"}),(0,r.kt)("p",null,"After this step, the WSC holds the ReserveCoin.")),(0,r.kt)(c.Z,{value:"buy_step3",label:"Step 3",mdxType:"TabItem"},(0,r.kt)("h4",{id:"token-allowance-set-an-allowance-for-transferring-reservecoin-from-wsc-to-the-layer-1-wallet"},"Token Allowance: Set an allowance for transferring ReserveCoin from WSC to the Layer 1 wallet"),(0,r.kt)("p",null,"Because the call to transfer the tokens (ReserveCoin) held in the WSC to the Mainchain wallet will triggered by another contract, the user must set an allowance for this transfer in step 3."),(0,r.kt)("p",null,"After confirming the allowance change, a confirmation is presented with a link to the transaction on the Layer 2 (Milkomeda C1 Sidechain)."),(0,r.kt)("img",{src:u,className:"img-full",alt:"Step 3"}),(0,r.kt)("p",null,"After this step, the WSC still holds the ReserveCoin.")),(0,r.kt)(c.Z,{value:"buy_step4",label:"Step 4",mdxType:"TabItem"},(0,r.kt)("h4",{id:"unwrapping-transfer-assets-back-to-layer-1-using-the-milkomeda-bridge"},"Unwrapping: Transfer assets back to Layer 1 using the Milkomeda Bridge"),(0,r.kt)("p",null,"The final step will transfer the asset (ReserveCoin in this example) to the Layer 1. WSC will seamlessly interact with the Milkomeda Bridge. Once bridge confirmations are complete, the assets will be securely returned to the mainchain wallet."),(0,r.kt)("img",{src:m,className:"img-full",alt:"Step 7"}),(0,r.kt)("p",null,"Example:\nIs this example, 50 ReserveCoin will be transferred to the Layer 1 Wallet, while paying 1 TADA in bridge fees. "),(0,r.kt)("p",null,"The Initial deposit of 3 TADA will be released"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Bridge fees"),(0,r.kt)("td",{parentName:"tr",align:null},"1 TADA")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"You'll transfer"),(0,r.kt)("td",{parentName:"tr",align:null},"50 RC")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Deposit Release"),(0,r.kt)("td",{parentName:"tr",align:null},"3 TADA")))))),(0,r.kt)("p",null,"Each step requires confirmation and, in some cases, may involve fees or waiting for bridge confirmations."),(0,r.kt)("p",null,"To summarize all the steps performed for the buying process, after the connection was made, the Dapp action was triggered to wrap ADA to the L2, which was then swapped for Djed ReserveCoin. The ReserveCoin was subsequently unwrapped back to Layer 1, ending up in the Cardano address of the user."),(0,r.kt)("h3",{id:"selling-reservecoin-djed-protocol"},"Selling ReserveCoin (Djed Protocol)"),(0,r.kt)("p",null,"The steps to sell the ReserveCoin, instead of buying, are very similar with the following differences:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"In the case of buying, ADA is wrapped to the L2, swapped, and then ReserveCoin is unwrapped to the L1. However, in the case of selling, the ReserveCoin is wrapped to the L2, swapped for mADA, and then mADA is unwrapped back to ADA on the L1."),(0,r.kt)("li",{parentName:"ul"},"The order of the steps for the sell action is slightly different. Since the ReserveCoin is an ERC20 token, the user will have to approve spending it to enable the swap. This approval step on the buying process was done after the swap in order to be able to unwrap the ReserveCoin.")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Connecting the Wallet"),' - Users can click "Connect your wallet" and choose "Flint WSC" to create a new address with the Wrapped Smart Contract, eliminating the need for multiple wallets.')),(0,r.kt)("img",{src:o,className:"img-full",alt:"Connect Wallets"}),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Initiating the Action"),' - The user can initiate the interaction with the DApp as he normally would. In this case, one would select the required options ("Sell") and input the required amount an then press the "Sell with WSC" button.')),(0,r.kt)("img",{src:h,className:"img-full",alt:"Sell Reservecoin"}),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Confirming the Steps"),"  - Users need to complete several interactions:",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"Wrapping: Convert Layer 1 asset (ReserveCoin) to Milkomeda assets to perform actions on Layer 2."),(0,r.kt)("li",{parentName:"ol"},"Token Allowance: Set a spending allowance for swapping ReserveCoin to mADA."),(0,r.kt)("li",{parentName:"ol"},"Execute Action: Execute the desired action on Layer 2, in this case, selling (swapping) Djed ReserveCoin for mADA."),(0,r.kt)("li",{parentName:"ol"},"Unwrapping: Transfer assets (ADA) back to Layer 1 using the Milkomeda Bridge.")))),(0,r.kt)(s.Z,{mdxType:"Tabs"},(0,r.kt)(c.Z,{value:"step1",label:"Step 1",default:!0,mdxType:"TabItem"},(0,r.kt)("h4",{id:"wrapping-convert-layer-1-assets-to-milkomeda-assets-to-perform-actions-on-layer-2-1"},"Wrapping: Convert Layer 1 assets to Milkomeda assets to perform actions on Layer 2"),(0,r.kt)("p",null,"The first step is to convert the Mainchain assets into Milkomeda assets, known as wrapping, for them to be available to perform the action on the Layer 2. In this example we will wrap the Reservecoin and we will need to wrap an additional 4.2 TADA to cover transaction costs."),(0,r.kt)("p",null,"Example:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Move ReserveCoin"),(0,r.kt)("td",{parentName:"tr",align:null},"10,000,000 tReserveCoin")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Bridge fees"),(0,r.kt)("td",{parentName:"tr",align:null},"1.1 TADA")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Bridge Lock-up"),(0,r.kt)("td",{parentName:"tr",align:null},"3 TADA")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Estimated EVM fees"),(0,r.kt)("td",{parentName:"tr",align:null},"~0.1 TADA")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Total ReserveCoin"),(0,r.kt)("td",{parentName:"tr",align:null},"10,000,000 tReserveCoin")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Total TADA"),(0,r.kt)("td",{parentName:"tr",align:null},"4.2")))),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Wrapping transaction may take a few minutes (~4m).")),(0,r.kt)("img",{src:f,className:"img-full",alt:"Step 1"}),(0,r.kt)("p",null,"A few minutes after signing the transaction, a confirmation will be presented and the user can move to the next step. A link to the bridge transaction for wrapping the assets is also presented."),(0,r.kt)("p",null,"At this point, the assets are now in the WSC on the Layer 2.")),(0,r.kt)(c.Z,{value:"step2",label:"Step 2",default:!0,mdxType:"TabItem"},(0,r.kt)("h4",{id:"token-allowance-set-an-allowance-for-swapping-reservecoin-for-mada"},"Token Allowance: Set an allowance for swapping ReserveCoin for mADA"),(0,r.kt)("p",null,"A normal previous step to any ERC20 swap is the token spending approval. This will allow the swapping contract to call the ",(0,r.kt)("inlineCode",{parentName:"p"},"TransferFrom")," on the ReserveCoin token."),(0,r.kt)("p",null,"After confirming the allowance change, a confirmation is presented with a link to the transaction on the Layer 2 (Milkomeda C1 Sidechain)."),(0,r.kt)("img",{src:g,className:"img-full",alt:"Step 2"}),(0,r.kt)("p",null,"After this step, the WSC still holds the ReserveCoin.")),(0,r.kt)(c.Z,{value:"step3",label:"Step 3",default:!0,mdxType:"TabItem"},(0,r.kt)("h4",{id:"execute-action-execute-the-desired-action-on-layer-2-1"},"Execute Action: Execute the desired action on Layer 2"),(0,r.kt)("p",null,"The thirst step is to execute the action on the Layer 2. In this case we are selling Djed ReserveCoin, so we will be swapping Djed ReserveCoin (MOR) for mADA."),(0,r.kt)("p",null,"After confirming the transaction, a confirmation is presented with a link to the transaction on the Layer 2 (Milkomeda C1 Sidechain)."),(0,r.kt)("img",{src:k,className:"img-full",alt:"Step 3"}),(0,r.kt)("p",null,"After this step, the WSC holds the mADA that resulted from the swap.")),(0,r.kt)(c.Z,{value:"step4",label:"Step 4",default:!0,mdxType:"TabItem"},(0,r.kt)("h4",{id:"unwrapping-transfer-assets-back-to-layer-1-using-the-milkomeda-bridge-1"},"Unwrapping: Transfer assets back to Layer 1 using the Milkomeda Bridge"),(0,r.kt)("p",null,"The final step will transfer the asset (mADA in this example) to the Layer 1. WSC will seamlessly interact with the Milkomeda Bridge. Once bridge confirmations are complete, the assets will be securely returned to the mainchain wallet."),(0,r.kt)("img",{src:y,className:"img-full",alt:"Step 4"}),(0,r.kt)("p",null,"Example:\nIs this example, 9.781795 TADA will be transferred to the Layer 1 Wallet, while paying 1 TADA in bridge fees. "),(0,r.kt)("p",null,"The Initial deposit of 3 TADA will be released"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Bridge fees"),(0,r.kt)("td",{parentName:"tr",align:null},"1 TADA")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"You'll transfer"),(0,r.kt)("td",{parentName:"tr",align:null},"9.781795 TADA")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Deposit Release"),(0,r.kt)("td",{parentName:"tr",align:null},"3 TADA")))))),(0,r.kt)("p",null,"To summarize all the steps performed for the selling process, after the connection was made, the Dapp action was triggered to wrap ReserveCoin to the L2, which was then swapped for mADA. The mADA resulting from the swap was subsequently unwrapped back to Layer 1, ending up in the Cardano address of the user."),(0,r.kt)("h2",{id:"summary"},"Summary"),(0,r.kt)("p",null,"Wrapped Smart Contracts on Milkomeda's Layer 2 provide a seamless user experience, enabling users to interact with DApps without the complexities of managing multiple wallets. The unified interaction flow between Layer 1 and Layer 2 enhances user convenience and encourages adoption, setting a new standard for smart contract-enabled blockchains and their ecosystems."))}C.isMDXComponent=!0},6544:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/djed_step1-53c8b2a2364b7cb681ab4494ede33f62.png"}}]);