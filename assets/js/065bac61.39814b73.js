"use strict";(self.webpackChunkmilkomeda_documentation=self.webpackChunkmilkomeda_documentation||[]).push([[9625],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=a.createContext({}),l=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=l(e.components);return a.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,p=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=l(n),m=o,g=u["".concat(p,".").concat(m)]||u[m]||d[m]||r;return n?a.createElement(g,i(i({ref:t},c),{},{components:n})):a.createElement(g,i({ref:t},c))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=u;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var l=2;l<r;l++)i[l]=n[l];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},3884:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>p,default:()=>m,frontMatter:()=>s,metadata:()=>l,toc:()=>d});var a=n(7462),o=(n(7294),n(3905)),r=n(6544);const i=n.p+"assets/images/option_a-149695cafe32d06dfaf8e7fd76b54605.png",s={sidebar_position:4},p="How to integrate",l={unversionedId:"cardano/wrapped-smart-contracts/developers/how_to_integrate",id:"cardano/wrapped-smart-contracts/developers/how_to_integrate",title:"How to integrate",description:"To provide developers with a seamless and intuitive way to integrate Wrapped Smart Contracts, we provide the Milkomeda WSC UI, a robust React component library designed to facilitate Wrapped Smart Contract usage with your dApp. It offers an intuitive and user-friendly approach to quickly get developers started with integration, ensuring a smooth and visually appealing user experience.",source:"@site/docs/cardano/wrapped-smart-contracts/developers/how_to_integrate.md",sourceDirName:"cardano/wrapped-smart-contracts/developers",slug:"/cardano/wrapped-smart-contracts/developers/how_to_integrate",permalink:"/cardano/wrapped-smart-contracts/developers/how_to_integrate",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"cardano",previous:{title:"Overview",permalink:"/cardano/wrapped-smart-contracts/developers/dev_overview"},next:{title:"FAQs",permalink:"/cardano/wrapped-smart-contracts/FAQs"}},c={},d=[{value:"Milkomeda WSC UI",id:"milkomeda-wsc-ui",level:2},{value:"Getting Started",id:"getting-started",level:3},{value:"Integration Approaches",id:"integration-approaches",level:2},{value:"Integrated DApp Frontend",id:"integrated-dapp-frontend",level:3},{value:"Usage",id:"usage",level:4},{value:"Wallet-like Interface",id:"wallet-like-interface",level:3},{value:"Summary",id:"summary",level:2}],u={toc:d};function m(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"how-to-integrate"},"How to integrate"),(0,o.kt)("p",null,"To provide developers with a seamless and intuitive way to integrate Wrapped Smart Contracts, we provide the ",(0,o.kt)("strong",{parentName:"p"},"Milkomeda WSC UI"),", a robust React component library designed to facilitate ",(0,o.kt)("strong",{parentName:"p"},"Wrapped Smart Contract")," usage with your dApp. It offers an intuitive and user-friendly approach to quickly get developers started with integration, ensuring a smooth and visually appealing user experience."),(0,o.kt)("h2",{id:"milkomeda-wsc-ui"},"Milkomeda WSC UI"),(0,o.kt)("h3",{id:"getting-started"},"Getting Started"),(0,o.kt)("p",null,"Get started with a Milkomeda WSC UI + WAGMI by installing the following packages in your project:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm install milkomeda-wsc-ui wagmi@0.12.15\n")),(0,o.kt)("p",null,"Please note that react, wagmi and ethers are peer dependencies:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'"peerDependencies": {\n  "react": "17.x || 18.x",\n  "react-dom": "17.x || 18.x",\n  "wagmi": "0.12.15",\n  "ethers": "5.x"\n}\n')),(0,o.kt)("p",null,"To enable top-level await and WebAssembly support in webpack, specific configuration is necessary. If you are utilizing webpack 5, you can achieve this by incorporating the following configuration settings. "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"// webpack.config.js\nmodule.exports = {\n  experiments: {\n    topLevelAwait: true,\n    asyncWebAssembly: true,\n  },\n}\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"// next.config.js\nconst nextConfig = {\n  reactStrictMode: true,\n  swcMinify: true,\n  webpack: (config) => {\n    config.experiments = {\n      asyncWebAssembly: true,\n      topLevelAwait: true,\n    };\n\n    return config;\n  },\n};\n\nmodule.exports = nextConfig;\n")),(0,o.kt)("h2",{id:"integration-approaches"},"Integration Approaches"),(0,o.kt)("p",null,"There are several ways to structure such integration but ",(0,o.kt)("strong",{parentName:"p"},"Milkomeda WSC UI")," package offers two explicit alternatives for integrating the necessary steps and prompts: (i) one where the prompts and actions are seamlessly embeded in the DApp frontend, and (ii) another where the user is presented with a wallet like interface that can be opened from the frontend."),(0,o.kt)("h3",{id:"integrated-dapp-frontend"},"Integrated DApp Frontend"),(0,o.kt)("p",null,"The method involves embedding the essential user prompts directly into the EVM DApp UI. When users interact with the protocol, such as performing a swap, a modal opens atop the UI, guiding them through four main steps: wrapping, executing the action, approving token spending, and finally unwrapping back to the mainchain."),(0,o.kt)("p",null,"Here's a preview of the first step within that would be integrated in the DApp frontend:"),(0,o.kt)("img",{src:r.Z,className:"img-full",alt:"Step 1"}),(0,o.kt)("p",null,"For a detailed, comprehensive example of this implementation, please refer to the ",(0,o.kt)("a",{parentName:"p",href:"/cardano/wrapped-smart-contracts/for_users"},"For Users")," section."),(0,o.kt)("h4",{id:"usage"},"Usage"),(0,o.kt)("p",null,"After importing ",(0,o.kt)("inlineCode",{parentName:"p"},"wagmi")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"milkomeda-wsc-ui")," into your project, you can create a configuration using either wagmi's ",(0,o.kt)("inlineCode",{parentName:"p"},"createConfig")," method or utilize the pre-configured ",(0,o.kt)("inlineCode",{parentName:"p"},"getDefaultConfig")," provided by ",(0,o.kt)("inlineCode",{parentName:"p"},"milkomeda-wsc-ui")," to enable connection to Milkomeda C1."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'import { WagmiConfig, createClient } from "wagmi";\nimport { ConnectWSCProvider, getDefaultConfig, ConnectWSCButton} from "milkomeda-wsc-ui";\nimport { ethers } from "ethers"\n\nconst client = createClient(getDefaultConfig({}));\n\nconst App = () => {\n  return (\n    <WagmiConfig client={client}>\n      <ConnectWSCProvider>\n        <ConnectWSCButton />\n      </ConnectWSCProvider>\n    </WagmiConfig>\n  );\n}\nexport default MyApp;\n')),(0,o.kt)("p",null,"You need to set up the ",(0,o.kt)("inlineCode",{parentName:"p"},"ConnectWSCProvider")," at the root of your application because it supplies all information about WSC Provider such as your balance in L1, origin tokens, evm tokens, etc. Learn more about it ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/dcSpark/wrapped-smartcontracts/tree/main/packages/milkomeda-wsc"},"here")),(0,o.kt)("details",null,(0,o.kt)("summary",null,"ConnectWSCProvider: more info"),(0,o.kt)("p",null,(0,o.kt)("p",null,"If you wish to access any of these values, you can utilize the custom hook useWSCProvider. This hook provides you with the necessary functionality to access the desired values conveniently."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Example:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"const Component = () => {\n  const {\n    wscProvider,\n    pendingTxs,\n\n    address,\n    destinationBalance,\n    originBalance,\n    originTokens,\n    tokens,\n    originAddress\n  } = useWSCProvider();\n\n  return(...)\n}\n")))),(0,o.kt)("p",null,"Then populate we need to set up a React provider (",(0,o.kt)("inlineCode",{parentName:"p"},"TransactionConfigWSCProvider"),") specifically designed to facilitate the configuration setup for using WSC (Wrapped Smart Contracts) in your dApp. "),(0,o.kt)("p",null,"Within this provider, you can conveniently define various aspects of the configuration using an options object, including the Cardano token you wish to wrap, the EVM contract request, and the EVM token you intend to unwrap at the end of the process. It's important to note that when utilizing the provider, make sure to include the ",(0,o.kt)("inlineCode",{parentName:"p"},"ConnectWSCButton")," as its child. This ensures that the action is correctly targeted and associated with the relevant functionality."),(0,o.kt)("p",null,"It's important to note that the process consists of four distinct steps: "),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Wrapping"),(0,o.kt)("li",{parentName:"ul"},"WSC Action Execution (EVM contract action)"),(0,o.kt)("li",{parentName:"ul"},"Token Allowance"),(0,o.kt)("li",{parentName:"ul"},"Unwrapping")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'import { WagmiConfig, createClient } from "wagmi";\nimport { ConnectWSCProvider, getDefaultConfig, TransactionConfigWSCProvider, ConnectWSCButton} from "milkomeda-wsc-ui";\nimport { ethers } from "ethers"\nimport djedABI from "../abi/djed.json";\n\nconst client = createClient(getDefaultConfig({}));\nconst DJED_ADDRESS = "0xc4c0669ea7bff70a6cfa5905a0ba487fc181dc37";\nconst reservecoinEVMAddress = "0x66c34c454f8089820c44e0785ee9635c425c9128";\n\n\nconst wscOptions = {\n  defaultWrapToken: {\n    unit: "lovelace", \n    amount: "10178117048345515637", // unscaled amount to wrap\n  },\n  defaultUnwrapToken: {\n    unit: reservecoinEVMAddress,\n    amount: "10000000", // unscaled amount to unwrap\n  },\n  titleModal: "Buy Reserve Coin",\n  evmTokenAddress: reservecoinEVMAddress,\n  evmContractRequest: {\n    address: DJED_ADDRESS,\n    abi: djedABI.abi,\n    functionName: "buyReserveCoins",\n    args: [account, "0000000000000000000000000", "0x0232556C83791b8291E9b23BfEa7d67405Bd9839"],\n    overrides: {\n      value: ethers.BigNumber.from("10178117048345515637"),\n    },\n  },\n}\n\nconst App = () => {\n  return (\n    <WagmiConfig client={client}>\n      <ConnectWSCProvider>\n        /* Your App */\n<TransactionConfigWSCProvider options={wscOptions}>\n        <ConnectWSCButton />\n        </TransactionConfigWSCProvider>\n      </ConnectWSCProvider>\n    </WagmiConfig>\n  );\n}\n\n\nexport default MyApp;\n\n')),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"ConnectWSCButton")," component can be placed wherever you want the Connect WSC Wallet button to be displayed. We are actively working on providing theme customization options to enhance the visual styling of the button"),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"Feel free to use the WSC React provider multiple times and in any desired location within your application. ")),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"In various scenarios, there might be a requirement to access the connected wallet in order to facilitate additional interactions or utilize other features offered by wagmi. You can seamlessly utilize all of these functionalities without any limitations as its one of our peer dependencies."),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'import { useAccount } from "wagmi";\n\n// Make sure that this component is wrapped with ConnectWSCProvider\nconst ExampleComponent = () => {\n  const { address, isConnecting, isDisconnected } = useAccount();\n  if (isConnecting) return <div>Connecting...</div>;\n  if (isDisconnected) return <div>Disconnected</div>;\n  return <div>Connected Wallet: {address}</div>;\n};\n\n'))),(0,o.kt)("p",null,"Congratulations! You have now successfully completed the setup process for Milkomeda WSC UI."),(0,o.kt)("details",null,(0,o.kt)("summary",null,"EXAMPLE: Djed implementation for buying"),(0,o.kt)("p",null,(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'const wscOptions = {\n  /* \n   We need to specify which token you\'ll wrap\n  */\n  defaultWrapToken: {\n    unit: "lovelace", // by default\n    amount: "10178117048345515637", // unscaled amount to wrap\n  },\n\n  /* \n   We need to specify which token you\'ll unwrap\n  */\n  defaultUnwrapToken: {\n    unit: reservecoinEVMAddress, // if its mADA, set it to an empty string\n    amount: "10000000", // unscaled amount to unwrap\n  },\n\n  /* \n   Title of the modal\n  */\n  titleModal: "Buy Reserve Coin",\n\n  /* \n   EVM Token address that we\'ll ask for token allowance\n  */\n  evmTokenAddress: reservecoinEVMAddress,\n\n  /* \n   EVM contract information to execute this action after wrapping\n  */\n  evmContractRequest: {\n    address: DJED_ADDRESS,\n    abi: djedABI.abi,\n    functionName: "buyReserveCoins",\n    args: [account, "0000000000000000000000000", "0x0232556C83791b8291E9b23BfEa7d67405Bd9839"], // arguments that needs to be passed to the method\n    overrides: {\n      value: ethers.BigNumber.from("10178117048345515637"),\n    },\n  },\n}\n\n...\n<TransactionConfigWSCProvider options={wscOptions}>\n        <ConnectWSCButton />\n        </TransactionConfigWSCProvider>\n...\n')))),(0,o.kt)("h3",{id:"wallet-like-interface"},"Wallet-like Interface"),(0,o.kt)("p",null,"Another effective approach is to present users with a wallet-like interface where they can easily view the balances of their assets/tokens on both Layer 1 and Layer 2. This interface includes buttons that enable effortless asset transfers in both directions."),(0,o.kt)("p",null,"Below is a screenshot demonstrating the user-friendly interface, allowing users to perform actions like selecting an asset and wrapping it into Milkomeda."),(0,o.kt)("img",{src:i,className:"img-full",alt:"Option A"}),(0,o.kt)("p",null,"To load this interface the ",(0,o.kt)("inlineCode",{parentName:"p"},"milkomeda-wsc-ui")," package provides ",(0,o.kt)("inlineCode",{parentName:"p"},"WSCInterface"),", a React component designed to integrate wrapped smart contracts in a different way. It provides valuable information about wrapped smart contracts and allows users to conveniently check and wrap your Cardano tokens, keeping track of pending transactions and enables unwrapping of WSC tokens."),(0,o.kt)("p",null,"This simplifies the process of incorporating wrapped smart contracts in DApp by presenting users with an interface with the following tabs:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"About"),": Provides all the information about WSC to get better understanding about the process and interactions"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Cardano"),": Lists all cardano tokens of the linked L1 address and presents inputs and buttons to be able to wrap them (some tokens are not eligible, as they are not supported by the bridge)"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Pending"),": Lists pending transactions for wrap or unwrap transactions\n-- ",(0,o.kt)("strong",{parentName:"li"},"WSC Wallet"),": Lists all WSC tokens and presents inputs and buttons also unwrap them if they are supported by the bridge")),(0,o.kt)("p",null,"Example: "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'import { useAccount } from "wagmi";\nimport { ConnectWSCProvider, getDefaultConfig } from "milkomeda-wsc-ui";\nimport { WagmiConfig, createClient } from "wagmi";\n\n\nconst client = createClient(\n  getDefaultConfig({\n    // your wagmi options\n  })\n);\n\n\nconst Component = () => {\n  return (\n    <WagmiConfig client={client}>\n      <ConnectWSCProvider>\n        <WSCInterface /> // place it wherever you want to\n      </ConnectWSCProvider>\n    </WagmiConfig>\n  );\n};\n')),(0,o.kt)("p",null,"An example is available in the following ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/dcSpark/wrapped-smartcontracts/blob/add-ui-library-wsc/packages/milkomeda-wsc-ui-next-example/pages/wsc-interface.tsx"},"repo")),(0,o.kt)("h2",{id:"summary"},"Summary"),(0,o.kt)("p",null,'The "Milkomeda WSC UI" React library is designed to facilitate the integration of Wrapped Smart Contracts (WSC) into decentralized applications (dApps). The goal is to provide developers with an intuitive and user-friendly approach to incorporating WSC functionality into their projects. The Milkomeda WSC UI offers two integration approaches:'),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Integrated DApp Frontend")," which involves embedding user prompts directly into the dApp UI. When users interact with the protocol (e.g., performing a swap), a modal opens on top of the UI, guiding them through four main steps: wrapping, executing the action, approving token spending, and unwrapping back to the mainchain. The developers can use pre-configured components to enable connection to Milkomeda C1.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Wallet-like Interface")," where users can have a wallet-like interface in the DApp that displays their asset/token balances on both Layer 1 and Layer 2. This interface includes buttons for easy asset transfers in both directions. Users can view and wrap Cardano tokens in Milkomeda, track pending transactions, and unwrap WSC tokens."))),(0,o.kt)("p",null,"To implement these integration approaches, developers need to install the Milkomeda WSC UI and WAGMI packages using npm. They should also set up specific configurations in their projects, including enabling top-level await and WebAssembly support in webpack. The Milkomeda WSC UI package provides React components like ",(0,o.kt)("inlineCode",{parentName:"p"},"ConnectWSCProvider"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"TransactionConfigWSCProvider"),", and ",(0,o.kt)("inlineCode",{parentName:"p"},"ConnectWSCButton"),", which are used to facilitate the configuration setup and interaction with WSC in the dApp."),(0,o.kt)("p",null,"With these integration options and the provided component library, developers can seamlessly integrate WSC functionality into their dApps, ensuring a smooth and visually appealing user experience for their users."))}m.isMDXComponent=!0},6544:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/djed_step1-53c8b2a2364b7cb681ab4494ede33f62.png"}}]);