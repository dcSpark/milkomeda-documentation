"use strict";(self.webpackChunkmilkomeda_documentation=self.webpackChunkmilkomeda_documentation||[]).push([[9952],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>u});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,s=e.originalType,l=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),m=c(a),u=r,h=m["".concat(l,".").concat(u)]||m[u]||d[u]||s;return a?n.createElement(h,i(i({ref:t},p),{},{components:a})):n.createElement(h,i({ref:t},p))}));function u(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=a.length,i=new Array(s);i[0]=m;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var c=2;c<s;c++)i[c]=a[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},5064:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>s,metadata:()=>o,toc:()=>c});var n=a(7462),r=(a(7294),a(3905));const s={sidebar_position:2},i="For Users",o={unversionedId:"cardano/wrapped-smart-contracts/for_users",id:"cardano/wrapped-smart-contracts/for_users",title:"For Users",description:"Until now, users that wanted to interact with Dapps on a Layer 2, had to move their assets from a Layer 1.",source:"@site/docs/cardano/wrapped-smart-contracts/for_users.md",sourceDirName:"cardano/wrapped-smart-contracts",slug:"/cardano/wrapped-smart-contracts/for_users",permalink:"/cardano/wrapped-smart-contracts/for_users",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"cardano",previous:{title:"Overview",permalink:"/cardano/wrapped-smart-contracts/overview"},next:{title:"For Developers",permalink:"/cardano/wrapped-smart-contracts/for_developers"}},l={},c=[{value:"Understanding Wrapped Smart Contracts",id:"understanding-wrapped-smart-contracts",level:3},{value:"How It Works",id:"how-it-works",level:3},{value:"Example Usecase: Buying ReserveCoin from the Djed Protocol",id:"example-usecase-buying-reservecoin-from-the-djed-protocol",level:3},{value:"Summary",id:"summary",level:3}],p={toc:c};function d(e){let{components:t,...s}=e;return(0,r.kt)("wrapper",(0,n.Z)({},p,s,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"for-users"},"For Users"),(0,r.kt)("p",null,"Until now, users that wanted to interact with Dapps on a Layer 2, had to move their assets from a Layer 1."),(0,r.kt)("p",null,"This migration process to a Layer 2 chain often involves bridging or wrapping assets from Layer 1 to facilitate interactions with smart contracts on Layer 2. However, this process can be complex, involving multiple steps across different interfaces and requiring more than one wallet. ",(0,r.kt)("strong",{parentName:"p"},"Milkomeda's Wrapped Smart Contracts (WSC)")," present an elegant solution that not only streamlines the user experience by eliminating the need for multiple wallets but also provides a unified interaction flow between Layer 1 and Layer 2."),(0,r.kt)("h3",{id:"understanding-wrapped-smart-contracts"},"Understanding Wrapped Smart Contracts"),(0,r.kt)("p",null,"When using WSC, a smart contract is deployed on Milkomeda's Layer 2, bound to the user's specific Layer 1 address. This smart contract serves as an account abstraction, possessing a balance, a nonce, and the ability to execute signed transactions on behalf of the user."),(0,r.kt)("h3",{id:"how-it-works"},"How It Works"),(0,r.kt)("p",null,"Users can connect to DApps that support WSC using their Cardano wallets, which will generate an EVM address for them. Unlike an Externally Owned Account (EOA), this address doesn't require users to manage private keys. Instead, users can create transactions on Layer 2 and sign them using their Layer 1 account."),(0,r.kt)("h3",{id:"example-usecase-buying-reservecoin-from-the-djed-protocol"},"Example Usecase: Buying ReserveCoin from the Djed Protocol"),(0,r.kt)("p",null,"To demonstrate the seamless interaction between Layer 1 and Layer 2, we'll walk through the steps of buying ReserveCoin from the Djed Protocol on Milkomeda's Layer 2 using WSC."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Connecting a Wallet"),' - Users can click "Connect your wallet" and choose "Flint WSC" to create a new address with the Wrapped Smart Contract, eliminating the need for multiple wallets.'),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"Select Wallet",src:a(8629).Z,width:"275",height:"345"})),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"Connected",src:a(3712).Z,width:"407",height:"91"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Initiating the Action")," - By clicking on the wallet address in the top right corner, users can access the WSC interface, which displays information and buttons to interact with the contract. Users can see their Layer 1 wallet balance and trigger actions with their WSC Wallet."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"Wallet",src:a(2100).Z,width:"466",height:"605"})),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"Buy",src:a(6784).Z,width:"607",height:"500"})))),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Confirming the Steps"),"  - The flow differs from using a traditional Layer 2 wallet since the WSC wallet initially has no funds on Layer 2. Users need to complete several interactions:",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"Wrapping: Convert Layer 1 assets to Milkomeda assets to perform actions on Layer 2."),(0,r.kt)("li",{parentName:"ol"},"Execute Action: Execute the desired action on Layer 2, in this case, buying Djed ReserveCoin."),(0,r.kt)("li",{parentName:"ol"},"Token Allowance: Set an allowance for transferring ReserveCoin from WSC to the Layer 1 wallet."),(0,r.kt)("li",{parentName:"ol"},"Unwrapping: Transfer assets back to Layer 1 using the Milkomeda Bridge.")))),(0,r.kt)("details",null,(0,r.kt)("summary",null,"A. Wrapping: Convert Layer 1 assets to Milkomeda assets to perform actions on Layer 2"),(0,r.kt)("p",null,(0,r.kt)("p",null,"The first step is to convert the Mainchain assets into Milkomeda assets, knowns as wrapping, for them to be available to perform the action on the Layer 2. In this example we will be need 50.9 TADA to buy the Reservecoin and we will need to wrap an additional 4.2 TADA to cover transaction costs."),(0,r.kt)("p",null,"Example:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Buy ReserveCoin"),(0,r.kt)("td",{parentName:"tr",align:null},"50.9 TADA")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Bridge fees"),(0,r.kt)("td",{parentName:"tr",align:null},"1.1 TADA")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Bridge Lock-up"),(0,r.kt)("td",{parentName:"tr",align:null},"3 TADA")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Estimated EVM fees"),(0,r.kt)("td",{parentName:"tr",align:null},"~0.1 TADA")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Total"),(0,r.kt)("td",{parentName:"tr",align:null},"55.1 TADA")))),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Wrapping transaction may take a few minutes (~4m).")),(0,r.kt)("p",null,"A few minutes after signing the transaction, a confirmation will be presented and the user can move to the next step. A link to the bridge transaction for wrapping the assets is also presented."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Buy",src:a(1383).Z,width:"792",height:"752"})),(0,r.kt)("p",null,"At this point, the assets are now in the WSC on the Layer 2."))),(0,r.kt)("details",null,(0,r.kt)("summary",null,"B. Execute Action: Execute the desired action on Layer 2"),(0,r.kt)("p",null,(0,r.kt)("p",null,"The second step is to execute the action on the Layer 2. In this case we are buying Djed ReserveCoin, so we will be swapping TADA for Djed ReserveCoin (MOR)."),(0,r.kt)("p",null,"After confirming the transaction, a confirmation is presented with a link to the transaction on the Layer 2 (Milkomeda C1 Sidechain)."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Buy",src:a(878).Z,width:"792",height:"752"})),(0,r.kt)("p",null,"After this step, the WSC holds the ReserveCoin."))),(0,r.kt)("details",null,(0,r.kt)("summary",null,"C. Token Allowance: Set an allowance for transferring ReserveCoin from WSC to the Layer 1 wallet."),(0,r.kt)("p",null,(0,r.kt)("p",null,"Because the call to transfer the tokens (ReserveCoin) held in the WSC to the Mainchain wallet will triggered by another contract, the user must set an allowance for this transfer in step 3."),(0,r.kt)("p",null,"After confirming the allowance change, a confirmation is presented with a link to the transaction on the Layer 2 (Milkomeda C1 Sidechain)."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Buy",src:a(8163).Z,width:"792",height:"752"})),(0,r.kt)("p",null,"After this step, the WSC still holds the ReserveCoin."))),(0,r.kt)("details",null,(0,r.kt)("summary",null,"D. Unwrapping: Transfer assets back to Layer 1 using the Milkomeda Bridge"),(0,r.kt)("p",null,(0,r.kt)("p",null,"The final step will transfer the asset (ReserveCoin in this example) to the Layer 1. WSC will seamlessly interact with the Milkomeda Bridge. Once bridge confirmations are complete, the assets will be securely returned to the mainchain wallet."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Buy",src:a(6389).Z,width:"792",height:"752"})),(0,r.kt)("p",null,"Example:\nIs this example, 50 ReserveCoin will be transferred to the Layer 1 Wallet, while paying 1 TADA in bridge fees. The Initial deposit of 3 TADA will be released"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Bridge fees"),(0,r.kt)("td",{parentName:"tr",align:null},"1 TADA")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"You'll transfer"),(0,r.kt)("td",{parentName:"tr",align:null},"50 RC")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Deposit Release"),(0,r.kt)("td",{parentName:"tr",align:null},"3 TADA")))))),(0,r.kt)("p",null,"Each step requires confirmation and, in some cases, may involve fees or waiting for bridge confirmations."),(0,r.kt)("h3",{id:"summary"},"Summary"),(0,r.kt)("p",null,"Wrapped Smart Contracts on Milkomeda's Layer 2 provide a seamless user experience, enabling users to interact with DApps without the complexities of managing multiple wallets. The unified interaction flow between Layer 1 and Layer 2 enhances user convenience and encourages adoption, setting a new standard for smart contract-enabled blockchains and their ecosystems."))}d.isMDXComponent=!0},6784:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/buy_reservecoin-10da3d75a8a82fed3e4887d895d11bed.png"},8629:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/connect_wallets-d45cb63537111c30cea02bbcd70734ce.png"},3712:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/connected-0e9c88a867593d7ad90972118d55d8da.png"},1383:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/djed_step1-78de328564141fc4c3e4f4843df8b929.png"},878:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/djed_step2-3ad6ab98d28c73390004f5d43160a39f.png"},8163:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/djed_step3-f1b3e4ed818f3febc99e292b2bb9d91c.png"},6389:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/djed_step4-12ddbaffe2fc9fe5b190246d747a4982.png"},2100:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/wallet-6c95bce7f0a4b883ff1ee8868dae19e6.png"}}]);